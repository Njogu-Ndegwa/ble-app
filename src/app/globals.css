@import url('https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Outfit:wght@300;400;500;600;700&display=swap');

/* Import Design System Tokens & Utilities */
@import '../styles/design-system.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===================== */
/* OVES DESIGN SYSTEM    */
/* ===================== */

/* Dark Theme (Default) - Omnivoltaic Brand */
:root {
  --bg-primary: #0a0f0f;
  --bg-secondary: #0f1515;
  --bg-tertiary: #141c1c;
  --bg-elevated: #1a2424;
  --border: #1e2d2d;
  --border-subtle: #172222;
  
  --text-primary: #f0fafa;
  --text-secondary: #94b8b8;
  --text-muted: #5a8080;
  
  /* Omnivoltaic Cyan/Teal */
  --accent: #00e5e5;
  --accent-light: #33ffff;
  --accent-dark: #00b8b8;
  --accent-soft: rgba(0, 229, 229, 0.15);
  --accent-glow: rgba(0, 229, 229, 0.4);
  
  --success: #00d9a0;
  --success-soft: rgba(0, 217, 160, 0.15);
  --success-glow: rgba(0, 217, 160, 0.4);
  
  --error: #ff5a5a;
  --error-soft: rgba(255, 90, 90, 0.15);
  
  --info: #00b4d8;
  --info-soft: rgba(0, 180, 216, 0.15);
  
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  
  /* Typography Scale */
  --font-xs: 9px;
  --font-sm: 10px;
  --font-base: 11px;
  --font-md: 12px;
  --font-lg: 13px;
  --font-xl: 14px;
  --font-2xl: 18px;
  --font-3xl: 20px;
  --font-4xl: 24px;
  
  --shadow-glow: 0 0 60px -15px var(--accent-glow);
  --shadow-card: 0 4px 24px -8px rgba(0, 0, 0, 0.5);
  
  --loading-overlay: rgba(10, 15, 15, 0.92);
  --logo-icon-text: #0a0f0f;
  --readonly-overlay: rgba(0, 0, 0, 0.12);
  
  /* Legacy support */
  --background: #0a0f0f;
  --foreground: #f0fafa;
}

/* Light Theme - Omnivoltaic Brand */
[data-theme="light"] {
  --bg-primary: #f5fafa;
  --bg-secondary: #ffffff;
  --bg-tertiary: #e8f4f4;
  --bg-elevated: #d8ebeb;
  --border: #b8d4d4;
  --border-subtle: #d0e5e5;
  
  --text-primary: #0a1a1a;
  --text-secondary: #3d5555;
  --text-muted: #6a8888;
  
  /* Omnivoltaic Cyan/Teal - slightly darker for light mode */
  --accent: #00b8b8;
  --accent-light: #00d4d4;
  --accent-dark: #009999;
  --accent-soft: rgba(0, 184, 184, 0.15);
  --accent-glow: rgba(0, 184, 184, 0.35);
  
  --success: #00a878;
  --success-soft: rgba(0, 168, 120, 0.12);
  --success-glow: rgba(0, 168, 120, 0.3);
  
  --error: #dc3545;
  --error-soft: rgba(220, 53, 69, 0.12);
  
  --info: #0094b8;
  --info-soft: rgba(0, 148, 184, 0.12);
  
  --shadow-glow: 0 0 60px -15px var(--accent-glow);
  --shadow-card: 0 4px 24px -8px rgba(0, 80, 80, 0.1);
  
  --loading-overlay: rgba(245, 250, 250, 0.95);
  --logo-icon-text: #ffffff;
  --readonly-overlay: rgba(0, 0, 0, 0.04);
  
  --background: #f5fafa;
  --foreground: #0a1a1a;
}

/* Base Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
}

/* Apply overflow:hidden only to pages that use fixed containers (new design) */
/* Legacy pages like Keypad need to scroll normally */
body.overflow-locked {
  overflow: hidden;
}

body {
  font-family: 'Outfit', sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}

/* Monospace utility class */
.font-mono-oves {
  font-family: 'DM Mono', monospace;
}

/* Theme Transition */
html {
  transition: background-color 0.3s ease;
}

html.theme-transition,
html.theme-transition *,
html.theme-transition *::before,
html.theme-transition *::after {
  transition: background-color 0.3s ease, 
              border-color 0.3s ease, 
              color 0.3s ease,
              box-shadow 0.3s ease !important;
}

/* ===================== */
/* THEME UTILITY CLASSES */
/* ===================== */
.bg-gradient-page {
  background: linear-gradient(to bottom, var(--gradient-page-from), var(--gradient-page-to));
}

/* ===================== */
/* SPLASH SCREEN STYLES  */
/* ===================== */
.splash-screen {
  position: fixed;
  inset: 0;
  background: var(--bg-primary);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 1;
  transition: opacity 0.6s ease, visibility 0.6s ease;
}

.splash-screen.hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.splash-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

/* Battery swap animation */
.splash-animation {
  position: relative;
  width: 120px;
  height: 160px;
  margin-bottom: 32px;
}

/* Battery shell */
.splash-battery {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 70px;
  height: 110px;
  background: var(--bg-tertiary);
  border: 3px solid var(--border);
  border-radius: 8px;
  overflow: hidden;
}

.splash-battery::before {
  content: '';
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 30px;
  height: 10px;
  background: var(--border);
  border-radius: 4px 4px 0 0;
}

/* Battery charging fill */
.splash-battery-fill {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 0%;
  background: linear-gradient(180deg, var(--accent) 0%, #00a0a0 100%);
  animation: batteryFill 2.3s steps(1, end) forwards;
}

@keyframes batteryFill {
  0% { height: 10%; }
  10% { height: 10%; }
  11% { height: 20%; }
  22% { height: 20%; }
  23% { height: 30%; }
  33% { height: 30%; }
  34% { height: 40%; }
  44% { height: 40%; }
  45% { height: 50%; }
  55% { height: 50%; }
  56% { height: 60%; }
  66% { height: 60%; }
  67% { height: 70%; }
  77% { height: 70%; }
  78% { height: 80%; }
  88% { height: 80%; }
  89% { height: 90%; }
  100% { height: 90%; }
}

/* Swap arrows */
.splash-arrows {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.splash-arrow {
  width: 24px;
  height: 24px;
  color: var(--accent);
  animation: arrowBounce 1s ease-in-out infinite;
}

.splash-arrow:nth-child(1) {
  animation-delay: 0s;
  opacity: 0.4;
}

.splash-arrow:nth-child(2) {
  animation-delay: 0.15s;
  opacity: 0.7;
}

.splash-arrow:nth-child(3) {
  animation-delay: 0.3s;
  opacity: 1;
}

@keyframes arrowBounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(6px); }
}

/* Energy particles */
.splash-particles {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.splash-particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: var(--accent);
  border-radius: 50%;
  animation: particleFloat 2s ease-in-out infinite;
}

.splash-particle:nth-child(1) {
  left: 10%;
  top: 60%;
  animation-delay: 0s;
}

.splash-particle:nth-child(2) {
  right: 10%;
  top: 50%;
  animation-delay: 0.5s;
}

.splash-particle:nth-child(3) {
  left: 20%;
  top: 30%;
  animation-delay: 1s;
}

.splash-particle:nth-child(4) {
  right: 20%;
  top: 70%;
  animation-delay: 1.5s;
}

@keyframes particleFloat {
  0%, 100% { 
    opacity: 0;
    transform: translateY(0) scale(0);
  }
  50% { 
    opacity: 1;
    transform: translateY(-20px) scale(1);
  }
}

.splash-logo-img {
  height: 48px;
  width: auto;
  margin-bottom: 16px;
  object-fit: contain;
}

.splash-loading {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--text-muted);
  font-size: 12px;
}

.splash-loading-dots {
  display: flex;
  gap: 4px;
}

.splash-loading-dot {
  width: 6px;
  height: 6px;
  background: var(--accent);
  border-radius: 50%;
  animation: loadingDot 1.2s ease-in-out infinite;
}

.splash-loading-dot:nth-child(1) { animation-delay: 0s; }
.splash-loading-dot:nth-child(2) { animation-delay: 0.2s; }
.splash-loading-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes loadingDot {
  0%, 100% { opacity: 0.3; transform: scale(0.8); }
  50% { opacity: 1; transform: scale(1); }
}

/* Splash Status Indicators */
.splash-status {
  display: flex;
  gap: 24px;
  margin-top: 24px;
}

.splash-status-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  color: var(--text-muted);
  opacity: 0.6;
  transition: all 0.3s ease;
}

.splash-status-item.ready {
  opacity: 1;
  color: var(--accent);
}

.splash-status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--text-muted);
  transition: all 0.3s ease;
}

.splash-status-item.ready .splash-status-dot {
  background: var(--accent);
  box-shadow: 0 0 8px var(--accent);
}

.splash-status-item.error {
  opacity: 1;
  color: #ef4444;
}

.splash-status-item.error .splash-status-dot {
  background: #ef4444;
  box-shadow: 0 0 8px #ef4444;
}

/* Splash Retry Styles */
.splash-retry {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  margin-top: 24px;
  animation: fadeIn 0.3s ease;
}

.splash-retry-message {
  color: var(--text-muted);
  font-size: 13px;
  text-align: center;
  line-height: 1.5;
  max-width: 280px;
}

.splash-retry-button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 24px;
  background: var(--accent);
  color: var(--bg-primary);
  border: none;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.splash-retry-button:hover {
  transform: scale(1.02);
  box-shadow: 0 4px 16px rgba(var(--accent-rgb), 0.4);
}

.splash-retry-button:active {
  transform: scale(0.98);
}

.splash-retry-icon {
  width: 18px;
  height: 18px;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ===================== */
/* ONBOARDING STYLES     */
/* ===================== */
.onboarding-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  max-height: 100%;
  overflow: hidden;
  padding: 0 16px;
  position: fixed;
  inset: 0;
  background: var(--bg-primary);
  z-index: 500;
}

/* Background gradient effect */
.onboarding-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 300px;
  background: radial-gradient(ellipse 80% 50% at 50% -20%, var(--accent-soft) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
}

.onboarding-header {
  padding: 12px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: relative;
  z-index: 10;
  flex-shrink: 0;
}

.onboarding-logo {
  height: 32px;
  width: auto;
  object-fit: contain;
}

.onboarding-slides {
  flex: 1;
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 0;
  z-index: 5;
}

.onboarding-slide {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 12px 20px;
  opacity: 0;
  transform: translateX(100%);
  transition: all 0.4s ease;
  pointer-events: none;
}

.onboarding-slide.active {
  opacity: 1;
  transform: translateX(0);
  pointer-events: auto;
}

.onboarding-slide.prev {
  transform: translateX(-100%);
}

.onboarding-image {
  width: 140px;
  height: 140px;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.onboarding-image img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.onboarding-content {
  text-align: center;
  max-width: 280px;
}

.onboarding-title {
  font-size: 18px;
  font-weight: 700;
  letter-spacing: -0.02em;
  margin-bottom: 8px;
  line-height: 1.2;
  color: var(--text-primary);
}

.onboarding-desc {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.5;
}

/* Pagination dots */
.onboarding-dots {
  display: flex;
  justify-content: center;
  gap: 8px;
  padding: 12px 0;
  flex-shrink: 0;
  position: relative;
  z-index: 10;
}

.onboarding-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--border);
  transition: all 0.3s ease;
  cursor: pointer;
}

.onboarding-dot.active {
  width: 24px;
  border-radius: 4px;
  background: var(--accent);
}

/* Onboarding actions */
.onboarding-actions {
  padding: 0 0 8px;
  flex-shrink: 0;
  position: relative;
  z-index: 10;
}

.onboarding-btn {
  width: 100%;
  padding: 14px 20px;
  border-radius: var(--radius-md);
  font-family: 'Outfit', sans-serif;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: linear-gradient(135deg, var(--accent) 0%, #00a0a0 100%);
  color: #ffffff;
}

.onboarding-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px -8px var(--accent-glow);
}

.onboarding-btn:active {
  transform: translateY(0);
}

.onboarding-btn svg {
  width: 18px;
  height: 18px;
}

.onboarding-skip {
  text-align: center;
  padding-bottom: 12px;
  flex-shrink: 0;
  position: relative;
  z-index: 10;
}

.onboarding-skip button {
  background: none;
  border: none;
  color: var(--text-muted);
  font-family: 'Outfit', sans-serif;
  font-size: 12px;
  cursor: pointer;
  padding: 8px 16px;
  transition: color 0.2s ease;
}

.onboarding-skip button:hover {
  color: var(--text-secondary);
}

/* Larger screens - expand onboarding */
@media (min-height: 700px) {
  .onboarding-image {
    width: 160px;
    height: 160px;
    margin-bottom: 20px;
  }
  .onboarding-title {
    font-size: 20px;
    margin-bottom: 10px;
  }
  .onboarding-desc {
    font-size: 13px;
  }
  .onboarding-dots {
    padding: 16px 0;
  }
}

/* ===================== */
/* UTILITY CLASSES       */
/* ===================== */
.oves-app {
  height: 100%;
  max-width: 430px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  background: var(--bg-primary);
  position: relative;
  overflow: hidden;
}

.oves-bg-gradient::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 300px;
  background: radial-gradient(ellipse 80% 50% at 50% -20%, var(--accent-soft) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
}

/* Scrollbar styles */
.oves-scrollbar::-webkit-scrollbar {
  width: 4px;
}

.oves-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.oves-scrollbar::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 2px;
}

/* Animation keyframes for fade slide in */
@keyframes fadeSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-slide-in {
  animation: fadeSlideIn 0.4s ease-out;
}

/* ===================== */
/* SELECT ROLE PAGE      */
/* ===================== */
.select-role-container {
  position: fixed;
  inset: 0;
  background: var(--bg-primary);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.select-role-bg-gradient {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 300px;
  background: radial-gradient(ellipse 80% 50% at 50% -20%, var(--accent-soft) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
}

.select-role-main {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 16px;
  position: relative;
  z-index: 5;
  max-width: 430px;
  margin: 0 auto;
  width: 100%;
}

.role-selection {
  padding-top: 0;
  display: flex;
  flex-direction: column;
  min-height: 100%;
  padding-bottom: 12px;
}

/* Hero Section with Bikes */
.role-hero {
  position: relative;
  margin: 0 -16px 4px;
  padding: 0 16px;
  overflow: hidden;
}

/* Atmospheric gradient cloud/mist at bottom */
.role-hero-atmosphere {
  position: absolute;
  bottom: 0;
  left: -20%;
  right: -20%;
  height: 50px;
  background: linear-gradient(90deg,
    rgba(0, 180, 216, 0.08) 0%,
    rgba(0, 229, 229, 0.18) 30%,
    rgba(0, 200, 200, 0.15) 50%,
    rgba(0, 229, 229, 0.18) 70%,
    rgba(0, 180, 216, 0.08) 100%
  );
  filter: blur(20px);
  pointer-events: none;
}

/* Secondary mist layer for depth */
.role-hero-mist {
  position: absolute;
  bottom: -10px;
  left: -10%;
  right: -10%;
  height: 35px;
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.04) 30%,
    rgba(255, 255, 255, 0.06) 50%,
    rgba(255, 255, 255, 0.04) 70%,
    transparent 100%
  );
  filter: blur(15px);
  pointer-events: none;
}

/* Subtle reflection */
.role-hero-reflect {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 150px;
  height: 20px;
  background: radial-gradient(ellipse, rgba(255,255,255,0.03) 0%, transparent 70%);
  pointer-events: none;
}

@media (max-height: 700px) {
  .role-hero-atmosphere {
    height: 40px;
  }
  .role-hero-mist {
    height: 25px;
  }
}

.role-hero-image {
  position: relative;
  z-index: 1;
  width: 100%;
  max-width: 280px;
  margin: 0 auto;
  padding-bottom: 6px;
}

.role-hero-image img {
  width: 100%;
  height: auto;
  object-fit: contain;
  display: block;
}

@media (min-height: 800px) {
  .role-hero-image {
    max-width: 320px;
  }
}

/* Title Section */
.role-header {
  text-align: center;
  padding: 2px 0 6px;
  position: relative;
  z-index: 2;
}

.role-title {
  font-size: 18px;
  font-weight: 700;
  letter-spacing: -0.02em;
  margin-bottom: 1px;
  color: var(--text-primary);
}

.role-description {
  font-size: 11px;
  color: var(--text-secondary);
  line-height: 1.3;
  max-width: 240px;
  margin: 0 auto;
}

.role-description strong {
  color: var(--text-primary);
  font-weight: 600;
}

/* Applet Grid */
.role-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 145px));
  justify-content: center;
  gap: 8px;
  padding: 0 0 6px;
}

.role-applet {
  aspect-ratio: 1;
  background: var(--bg-secondary);
  border: 2px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.25s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 6px;
  position: relative;
  overflow: hidden;
}

.role-applet::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--accent-soft) 0%, transparent 60%);
  opacity: 0;
  transition: opacity 0.25s ease;
}

.role-applet:hover {
  border-color: var(--accent);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px -6px var(--accent-glow);
}

.role-applet:hover::before {
  opacity: 1;
}

.role-applet.selected {
  border-color: var(--accent);
  background: var(--accent-soft);
}

.role-applet.selected::after {
  content: '';
  position: absolute;
  top: 6px;
  right: 6px;
  width: 18px;
  height: 18px;
  background: var(--accent);
  border-radius: 50%;
}

.role-applet .check-icon {
  position: absolute;
  top: 7px;
  right: 7px;
  width: 16px;
  height: 16px;
  color: var(--bg-primary);
  z-index: 2;
  opacity: 0;
  transform: scale(0);
  transition: all 0.2s ease;
}

.role-applet.selected .check-icon {
  opacity: 1;
  transform: scale(1);
}

.role-applet.disabled {
  opacity: 0.45;
  pointer-events: none;
}

.role-applet-image {
  width: 70%;
  aspect-ratio: 1;
  margin-bottom: 2px;
  position: relative;
  z-index: 1;
  transition: transform 0.25s ease;
}

.role-applet:hover .role-applet-image {
  transform: scale(1.08);
}

.role-applet-image img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.role-applet-label {
  font-size: 11px;
  font-weight: 600;
  text-align: center;
  position: relative;
  z-index: 1;
  line-height: 1.2;
  color: var(--text-primary);
}

.role-applet-badge {
  position: absolute;
  bottom: 4px;
  left: 50%;
  transform: translateX(-50%);
  padding: 2px 5px;
  background: var(--bg-tertiary);
  border-radius: 6px;
  font-size: 7px;
  font-weight: 500;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

/* Role Page Action */
.role-action {
  margin-top: auto;
  padding: 20px 0 4px;
}

.role-btn {
  width: 100%;
  padding: 14px 20px;
  border-radius: var(--radius-md);
  font-family: 'Outfit', sans-serif;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: linear-gradient(135deg, var(--accent) 0%, #00a0a0 100%);
  color: #ffffff;
}

.role-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px -8px var(--accent-glow);
}

.role-btn:active:not(:disabled) {
  transform: translateY(0);
}

.role-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
  box-shadow: none !important;
}

.role-btn.ready {
  animation: btnPulse 0.3s ease;
}

.role-btn svg {
  width: 18px;
  height: 18px;
}

@keyframes btnPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

/* ===================== */
/* ATTENDANT MODULE      */
/* ===================== */

/* Attendant Container */
.attendant-container {
  position: fixed;
  inset: 0;
  background: var(--bg-primary);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: 100;
}

.attendant-bg-gradient {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 300px;
  background: radial-gradient(ellipse 80% 50% at 50% -20%, var(--accent-soft) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
}

/* Progress Steps */
.progress-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px 0 6px;
  margin-bottom: 0;
  position: relative;
  z-index: 10;
}

.progress-step {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--border);
  transition: all 0.3s ease;
}

.progress-step.active {
  background: var(--accent);
  width: 24px;
  border-radius: 4px;
}

.progress-step.completed {
  background: var(--success);
}

/* Attendant Main Content */
.attendant-main {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0 16px 100px;
  position: relative;
  z-index: 5;
  max-width: 430px;
  margin: 0 auto;
  width: 100%;
}

/* When bottom nav is present (set on container), add extra padding */
.attendant-container.has-bottom-nav .attendant-main {
  padding-bottom: 150px; /* Space for action bar + navigation + buffer */
}

/* Back to Roles Link */
.back-to-roles {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 0;
  margin-bottom: 8px;
  cursor: pointer;
  color: var(--text-muted);
  font-size: 12px;
  transition: color 0.2s ease;
  background: none;
  border: none;
  font-family: 'Outfit', sans-serif;
}

.back-to-roles:hover {
  color: var(--accent);
}

.back-to-roles svg {
  width: 14px;
  height: 14px;
}

/* Scan Screen */
.scan-prompt {
  text-align: center;
  padding-top: 16px;
}

.scan-title {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 4px;
  letter-spacing: -0.02em;
  color: var(--text-primary);
}

.scan-subtitle {
  color: var(--text-secondary);
  font-size: 12px;
  margin-bottom: 16px;
}

.scanner-area {
  width: 200px;
  height: 200px;
  margin: 0 auto 20px;
  position: relative;
  cursor: pointer;
}

.scanner-frame {
  width: 100%;
  height: 100%;
  border: 2px solid var(--border);
  border-radius: var(--radius-xl);
  position: relative;
  background: var(--bg-secondary);
  overflow: hidden;
  transition: all 0.3s ease;
}

.scanner-area:hover .scanner-frame {
  border-color: var(--accent);
  box-shadow: var(--shadow-glow);
}

.scanner-corners {
  position: absolute;
  inset: 14px;
}

.scanner-corners::before,
.scanner-corners::after {
  content: '';
  position: absolute;
  width: 24px;
  height: 24px;
  border-color: var(--accent);
  border-style: solid;
  border-width: 0;
}

.scanner-corners::before {
  top: 0;
  left: 0;
  border-top-width: 3px;
  border-left-width: 3px;
  border-top-left-radius: 8px;
}

.scanner-corners::after {
  top: 0;
  right: 0;
  border-top-width: 3px;
  border-right-width: 3px;
  border-top-right-radius: 8px;
}

.scanner-corner-bl,
.scanner-corner-br {
  position: absolute;
  width: 24px;
  height: 24px;
  border-color: var(--accent);
  border-style: solid;
  border-width: 0;
}

.scanner-corner-bl {
  bottom: 0;
  left: 0;
  border-bottom-width: 3px;
  border-left-width: 3px;
  border-bottom-left-radius: 8px;
}

.scanner-corner-br {
  bottom: 0;
  right: 0;
  border-bottom-width: 3px;
  border-right-width: 3px;
  border-bottom-right-radius: 8px;
}

.scanner-line {
  position: absolute;
  left: 30px;
  right: 30px;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--accent), transparent);
  animation: scanLine 2s ease-in-out infinite;
  box-shadow: 0 0 20px var(--accent-glow);
}

@keyframes scanLine {
  0%, 100% { top: 30px; opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { top: calc(100% - 30px); opacity: 0; }
}

.scanner-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: var(--text-muted);
}

.scanner-icon svg {
  width: 48px;
  height: 48px;
  stroke-width: 1.5;
}

/* Tap to scan prompt - clear call-to-action for users */
.scanner-tap-prompt {
  position: absolute;
  bottom: 12px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--accent-soft);
  color: var(--accent);
  font-size: 10px;
  font-weight: 600;
  padding: 3px 8px;
  border-radius: var(--radius-sm);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Scanner disabled state - prevents multiple scanner opens */
.scanner-area-disabled {
  cursor: not-allowed;
}

.scanner-area-disabled .scanner-frame {
  border-color: var(--border);
}

.scanner-area-disabled:hover .scanner-frame {
  border-color: var(--border);
  box-shadow: none;
}

.scanner-loading {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.scanner-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--border);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: scanner-spin 0.8s linear infinite;
}

@keyframes scanner-spin {
  to {
    transform: rotate(360deg);
  }
}

.scan-hint {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  color: var(--text-muted);
  font-size: 13px;
}

.scan-hint svg {
  width: 16px;
  height: 16px;
}

/* Expected Battery Info (for returning customers) */
.expected-battery-info {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin: 16px auto;
  padding: 10px 16px;
  background: var(--accent-soft);
  border: 1px solid var(--accent);
  border-radius: var(--radius-md);
  max-width: 220px;
}

.expected-battery-info > svg {
  width: 22px;
  height: 22px;
  color: var(--accent);
  flex-shrink: 0;
}

.expected-battery-details {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.expected-label {
  font-size: 10px;
  font-weight: 500;
  color: var(--accent);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.expected-id {
  font-size: 14px;
  font-weight: 600;
  color: var(--accent);
  font-family: var(--font-mono);
}

/* Input Toggle (Scan vs Manual) */
.input-toggle {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  background: var(--bg-tertiary);
  padding: 4px;
  border-radius: var(--radius-md);
}

.toggle-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px 12px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  font-family: 'Outfit', sans-serif;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s ease;
}

.toggle-btn svg {
  width: 16px;
  height: 16px;
}

.toggle-btn.active {
  background: var(--accent);
  color: var(--bg-primary);
}

.toggle-btn:not(.active):hover {
  color: var(--text-secondary);
  background: var(--bg-elevated);
}

/* Manual Entry Form */
.manual-entry-form {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 16px;
  margin-bottom: 16px;
}

.manual-id-input {
  font-family: 'DM Mono', monospace;
  letter-spacing: 0.05em;
}

/* Stats Row */
.stats-row {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-top: 16px;
}

.stat-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-md);
  padding: 10px 8px;
  text-align: center;
}

.stat-value {
  font-family: 'DM Mono', monospace;
  font-size: 20px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.stat-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-muted);
}

/* Battery & Customer Cards */
.battery-card, .customer-card, .cost-card, .receipt-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 14px;
  margin-bottom: 12px;
}

.battery-header, .customer-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 12px;
}

.battery-id, .customer-id {
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 2px;
}

.battery-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
}

.battery-status {
  padding: 4px 10px;
  border-radius: 16px;
  font-size: 11px;
  font-weight: 500;
}

.battery-status.verified {
  background: var(--success-soft);
  color: var(--success);
}

.battery-status.pending {
  background: var(--accent-soft);
  color: var(--accent);
}

.battery-status.error {
  background: var(--error-soft);
  color: var(--error);
}

.battery-visual {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 12px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  margin-bottom: 0;
}

.battery-icon-large {
  width: 50px;
  height: 70px;
  background: linear-gradient(180deg, var(--bg-elevated) 0%, var(--bg-tertiary) 100%);
  border: 2px solid var(--border);
  border-radius: 6px;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  overflow: visible;
  flex-shrink: 0;
  margin-top: 10px;
}

.battery-icon-large::before {
  content: '';
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 18px;
  height: 10px;
  background: var(--border);
  border-radius: 3px 3px 0 0;
}

.battery-level {
  height: var(--level, 35%);
  background: linear-gradient(180deg, var(--accent) 0%, #00a0a0 100%);
  transition: height 0.5s ease;
}

.battery-level.full {
  background: linear-gradient(180deg, var(--success) 0%, #00a078 100%);
}

.battery-info {
  flex: 1;
}

.battery-charge {
  font-size: 24px;
  font-weight: 600;
  margin-bottom: 2px;
  line-height: 1;
  color: var(--text-primary);
}

.battery-charge-label {
  font-size: 10px;
  color: var(--text-secondary);
  margin-bottom: 6px;
}

/* Visual Battery Swap Comparison */
.battery-swap-visual {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  padding: 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  margin-bottom: 10px;
}

.battery-swap-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding-top: 12px;
}

.battery-icon-swap {
  width: 60px;
  height: 85px;
  background: var(--bg-tertiary);
  border: 3px solid var(--border);
  border-radius: 6px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: visible;
}

.battery-icon-swap::before {
  content: '';
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  width: 22px;
  height: 12px;
  background: var(--border);
  border-radius: 3px 3px 0 0;
}

.battery-icon-swap.low {
  border-color: var(--error);
}

.battery-icon-swap.low::before {
  background: var(--error);
}

.battery-icon-swap.medium {
  border-color: #f59e0b;
}

.battery-icon-swap.medium::before {
  background: #f59e0b;
}

.battery-icon-swap.full {
  border-color: var(--success);
}

.battery-icon-swap.full::before {
  background: var(--success);
}

.battery-level-swap {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: var(--level, 50%);
  transition: height 0.5s ease;
}

.battery-icon-swap.low .battery-level-swap {
  background: linear-gradient(180deg, var(--error) 0%, #cc4444 100%);
}

.battery-icon-swap.medium .battery-level-swap {
  background: linear-gradient(180deg, #f59e0b 0%, #d97706 100%);
}

.battery-icon-swap.full .battery-level-swap {
  background: linear-gradient(180deg, var(--success) 0%, #00a878 100%);
}

.battery-percent {
  position: relative;
  z-index: 1;
  font-family: 'DM Mono', monospace;
  font-size: 14px;
  font-weight: 600;
  color: white;
  text-shadow: 0 1px 2px rgba(0,0,0,0.5);
}

.battery-swap-label {
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-muted);
  font-weight: 500;
}

.battery-swap-id {
  font-family: 'DM Mono', monospace;
  font-size: 10px;
  color: var(--text-secondary);
}

.swap-arrow-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background: var(--accent-soft);
  border-radius: 50%;
}

.swap-arrow-icon svg {
  width: 20px;
  height: 20px;
  color: var(--accent);
}

/* Energy Differential Badge */
.energy-diff-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 16px;
  background: var(--accent-soft);
  border: 1px solid var(--accent);
  border-radius: 20px;
  margin: 0 auto 12px;
  width: fit-content;
}

.energy-diff-badge svg {
  width: 16px;
  height: 16px;
  color: var(--accent);
}

.energy-diff-badge span {
  font-size: 12px;
  font-weight: 600;
  color: var(--accent);
}

/* Quota Credit Banner - Shows when customer has sufficient quota to skip payment */
.quota-credit-banner {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.08) 100%);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: var(--radius-lg);
  margin-bottom: 12px;
}

.quota-credit-icon {
  width: 36px;
  height: 36px;
  background: rgba(34, 197, 94, 0.2);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.quota-credit-icon svg {
  width: 18px;
  height: 18px;
  color: #22c55e;
}

.quota-credit-text {
  flex: 1;
}

.quota-credit-title {
  font-size: 13px;
  font-weight: 600;
  color: #22c55e;
  margin-bottom: 2px;
}

.quota-credit-subtitle {
  font-size: 11px;
  color: rgba(34, 197, 94, 0.8);
}

/* Cost Total Credit Variant - When using quota credit */
.cost-total-credit {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.08) 100%);
  border: 1px solid rgba(34, 197, 94, 0.2);
}

.cost-total-credit .cost-total-value {
  color: #22c55e;
}

/* Customer Card */
.customer-card {
  padding: 12px;
}

.customer-header {
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.customer-avatar {
  width: 36px;
  height: 36px;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  font-weight: 600;
  color: white;
  flex-shrink: 0;
}

.customer-name {
  font-size: 13px;
  font-weight: 500;
  margin-bottom: 1px;
  color: var(--text-primary);
}

/* Cost Breakdown */
.cost-title {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.cost-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 0;
  border-bottom: 1px solid var(--border-subtle);
}

.cost-row:last-child {
  border-bottom: none;
}

.cost-label {
  color: var(--text-secondary);
  font-size: 12px;
}

.cost-value {
  font-family: 'DM Mono', monospace;
  font-size: 12px;
  color: var(--text-primary);
}

.cost-total {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: var(--accent-soft);
  border-radius: var(--radius-md);
  margin-top: 8px;
}

.cost-total-label {
  font-weight: 500;
  font-size: 12px;
  color: var(--text-primary);
}

.cost-total-value {
  font-family: 'DM Mono', monospace;
  font-size: 18px;
  font-weight: 600;
  color: var(--accent);
}

/* Compact Payment Header - Shows customer and amount when full panel is hidden */
.payment-header-compact {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  margin-bottom: 12px;
  border: 1px solid var(--border);
}

.payment-customer-mini {
  display: flex;
  align-items: center;
  gap: 10px;
}

.payment-customer-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent), var(--accent-hover));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 700;
  color: white;
  flex-shrink: 0;
}

.payment-customer-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.payment-amount-large {
  font-family: 'DM Mono', monospace;
  font-size: 20px;
  font-weight: 700;
  color: var(--accent);
  white-space: nowrap;
}

/* Manual entry mode optimizations for keyboard visibility */
.payment-input-mode-manual {
  padding-bottom: 0;
}

.payment-input-mode-manual .manual-entry-form {
  margin-bottom: 16px;
}

/* Large Confirm Payment CTA - matches ScannerArea size and prominence */
.confirm-payment-cta {
  width: 140px;
  height: 140px;
  margin: 16px auto;
  padding: 0;
  border: 2px solid var(--accent);
  border-radius: var(--radius-xl);
  background: var(--bg-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.confirm-payment-cta:hover:not(:disabled) {
  border-color: var(--accent);
  box-shadow: var(--shadow-glow);
  background: rgba(var(--accent-rgb), 0.1);
}

.confirm-payment-cta:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  border-color: var(--border);
}

.confirm-payment-cta-inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

.confirm-payment-cta-icon {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
}

.confirm-payment-cta-icon svg {
  width: 24px;
  height: 24px;
  stroke: white;
}

.confirm-payment-cta-text {
  font-size: 12px;
  font-weight: 600;
  color: var(--accent);
  text-align: center;
  line-height: 1.2;
}

.confirm-payment-cta:disabled .confirm-payment-cta-icon {
  background: var(--text-muted);
}

.confirm-payment-cta:disabled .confirm-payment-cta-text {
  color: var(--text-muted);
}

/* Payment Scan */
.payment-scan {
  text-align: center;
  padding: 10px 0;
}

.payment-title {
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 4px;
  color: var(--text-primary);
}

.payment-subtitle {
  color: var(--text-secondary);
  font-size: 12px;
  margin-bottom: 16px;
}

.qr-scanner-area {
  width: 140px;
  height: 140px;
  margin: 0 auto 12px;
  position: relative;
}

.qr-scanner-frame {
  width: 100%;
  height: 100%;
  border: 2px dashed var(--accent);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
}

.qr-scanner-frame:hover {
  background: var(--accent-soft);
  border-style: solid;
}

.qr-scanner-frame svg {
  width: 36px;
  height: 36px;
  color: var(--accent);
}

.payment-amount {
  font-family: 'DM Mono', monospace;
  font-size: 20px;
  font-weight: 600;
  color: var(--accent);
  margin-bottom: 4px;
}

.payment-status {
  color: var(--text-muted);
  font-size: 10px;
}

/* Incomplete Payment Status Panel */
.payment-status-panel {
  padding: 14px 16px;
  border-radius: var(--radius-lg);
  margin-bottom: 14px;
  border: 1px solid var(--border);
}

.payment-status-panel.payment-status-incomplete {
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.08) 0%, rgba(251, 191, 36, 0.08) 100%);
  border-color: rgba(239, 68, 68, 0.3);
}

.payment-status-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.payment-status-icon {
  color: var(--error);
  flex-shrink: 0;
}

.payment-status-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--error);
}

.payment-progress-container {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 14px;
}

.payment-progress-bar {
  flex: 1;
  height: 8px;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  overflow: hidden;
}

.payment-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--error) 0%, #fbbf24 100%);
  border-radius: 4px;
  transition: width 0.3s ease;
}

.payment-progress-percent {
  font-family: 'DM Mono', monospace;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  min-width: 40px;
  text-align: right;
}

.payment-amounts-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-bottom: 12px;
}

.payment-amount-item {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.payment-amount-item.payment-amount-remaining-item {
  grid-column: 1 / -1;
  background: rgba(239, 68, 68, 0.1);
  padding: 10px 12px;
  border-radius: var(--radius-md);
  margin-top: 4px;
}

.payment-amount-label {
  font-size: 11px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.payment-amount-value {
  font-family: 'DM Mono', monospace;
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
}

.payment-amount-value.payment-amount-paid {
  color: var(--success);
}

.payment-amount-value.payment-amount-remaining {
  color: var(--error);
  font-size: 18px;
}

.payment-status-hint {
  font-size: 12px;
  color: var(--text-secondary);
  text-align: center;
  margin: 0;
  padding-top: 4px;
  border-top: 1px dashed var(--border);
}

/* Success Screen */
.success-screen {
  text-align: center;
  padding-top: 20px;
}

.success-icon {
  width: 64px;
  height: 64px;
  background: var(--success-soft);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 12px;
  animation: successPop 0.5s ease-out;
}

@keyframes successPop {
  0% { transform: scale(0); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.success-icon svg {
  width: 32px;
  height: 32px;
  color: var(--success);
}

.success-title {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 4px;
  color: var(--text-primary);
}

.success-message {
  color: var(--text-secondary);
  font-size: 12px;
  margin-bottom: 14px;
}

.receipt-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 10px;
  border-bottom: 1px dashed var(--border);
  margin-bottom: 8px;
}

.receipt-title {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
}

.receipt-id {
  font-family: 'DM Mono', monospace;
  font-size: 10px;
  color: var(--text-muted);
}

.receipt-row {
  display: flex;
  justify-content: space-between;
  padding: 5px 0;
  font-size: 11px;
}

.receipt-label {
  color: var(--text-muted);
}

.receipt-value {
  font-weight: 500;
  color: var(--text-primary);
}

/* Bottom Action Bar */
.action-bar {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  max-width: 430px;
  padding: 12px 16px calc(12px + env(safe-area-inset-bottom, 0px));
  background: linear-gradient(to top, var(--bg-primary) 85%, transparent);
  z-index: 100;
}

.action-bar-inner {
  display: flex;
  gap: 10px;
}

.btn {
  flex: 1;
  padding: 12px 16px;
  border-radius: var(--radius-md);
  font-family: 'Outfit', sans-serif;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.btn svg {
  width: 18px;
  height: 18px;
}

.btn-primary {
  background: linear-gradient(135deg, var(--accent) 0%, #00a0a0 100%);
  color: #ffffff;
}

.btn-primary:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px -8px var(--accent-glow);
}

.btn-primary:active:not(:disabled) {
  transform: translateY(0);
}

.btn-primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-secondary {
  background: var(--bg-tertiary);
  color: var(--text-primary);
  border: 1px solid var(--border);
}

.btn-secondary:hover:not(:disabled) {
  background: var(--bg-elevated);
  border-color: var(--text-muted);
}

.btn-success {
  background: linear-gradient(135deg, var(--success) 0%, #00a078 100%);
  color: white;
}

.btn-success:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px -8px var(--success-glow);
}

/* Ensure button text stays on one line on all screen sizes */
.btn span {
  white-space: nowrap;
}

/* Responsive button sizing for small screens */
@media (max-width: 380px) {
  .action-bar {
    padding: 10px 12px calc(10px + env(safe-area-inset-bottom, 0px));
  }
  
  .action-bar-inner {
    gap: 8px;
  }
  
  .btn {
    padding: 10px 12px;
    font-size: 12px;
    gap: 6px;
  }
  
  .btn svg {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
  }
}

/* Extra small screens (iPhone SE, etc.) */
@media (max-width: 340px) {
  .action-bar {
    padding: 8px 10px calc(8px + env(safe-area-inset-bottom, 0px));
  }
  
  .action-bar-inner {
    gap: 6px;
  }
  
  .btn {
    padding: 10px 10px;
    font-size: 11px;
    gap: 4px;
  }
  
  .btn svg {
    width: 14px;
    height: 14px;
  }
}

/* Form Styles */
.form-group {
  margin-bottom: 10px;
}

.form-label {
  display: block;
  font-size: 10px;
  font-weight: 500;
  margin-bottom: 4px;
  color: var(--text-secondary);
}

.form-input {
  width: 100%;
  padding: 10px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-family: 'Outfit', sans-serif;
  font-size: 12px;
  color: var(--text-primary);
  transition: all 0.2s ease;
}

.form-input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 2px var(--accent-soft);
}

.form-input::placeholder {
  color: var(--text-muted);
}

.form-input.error {
  border-color: var(--error);
}

.form-error {
  font-size: 10px;
  color: var(--error);
  margin-top: 4px;
}

.form-row {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
}

.form-section {
  margin-bottom: 14px;
}

.form-section-title {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--text-muted);
  margin-bottom: 8px;
}

/* Login Module */
.login-page-container {
  position: fixed;
  inset: 0;
  background: var(--bg-primary);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: 100;
}

.login-bg-gradient {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 300px;
  background: radial-gradient(ellipse 80% 50% at 50% -20%, var(--accent-soft) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
}

.login-page-container .login-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  overflow-y: auto;
  padding: 20px;
  z-index: 1;
}

.login-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: calc(100vh - 80px);
  padding: 20px;
}

.login-logo {
  display: flex;
  align-items: center;
  justify-content: center;
}

.login-header {
  text-align: center;
  margin-bottom: 32px;
}

.login-icon {
  width: 64px;
  height: 64px;
  background: var(--accent-soft);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 16px;
}

.login-icon svg {
  width: 32px;
  height: 32px;
  color: var(--accent);
}

.login-title {
  font-size: 22px;
  font-weight: 700;
  margin-bottom: 4px;
  color: var(--text-primary);
}

.login-subtitle {
  font-size: 13px;
  color: var(--text-secondary);
}

.login-form {
  width: 100%;
  max-width: 320px;
}

.login-form .form-group {
  margin-bottom: 16px;
}

.input-with-icon {
  position: relative;
}

.input-with-icon > svg {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  width: 18px;
  height: 18px;
  color: var(--text-muted);
  pointer-events: none;
}

/* Password toggle button inside input-with-icon */
.input-with-icon .password-toggle {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  z-index: 1;
}

.input-with-icon .password-toggle:hover {
  color: var(--text-secondary);
}

.input-with-icon .password-toggle:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.input-with-icon .password-toggle svg {
  position: static;
  transform: none;
  width: 20px;
  height: 20px;
  pointer-events: auto;
}

.input-with-icon .form-input {
  padding-left: 42px;
}

.login-btn {
  width: 100%;
  margin-top: 8px;
  padding: 14px 20px;
}

.login-help {
  text-align: center;
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 16px;
}

/* Status Alert */
.status-alert {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 14px;
  border-radius: var(--radius-md);
  margin-bottom: 16px;
  font-size: 12px;
}

.status-alert.success {
  background: var(--success-soft);
  border: 1px solid var(--success);
  color: var(--success);
}

.status-alert.error {
  background: var(--error-soft);
  border: 1px solid var(--error);
  color: var(--error);
}

.status-alert svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

/* Back Link */
.back-link {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 0;
  margin-bottom: 8px;
  cursor: pointer;
  color: var(--text-muted);
  font-size: 12px;
  transition: color 0.2s ease;
  background: none;
  border: none;
  font-family: inherit;
}

.back-link:hover {
  color: var(--accent);
}

.back-link svg {
  width: 14px;
  height: 14px;
}

/* Loading Overlay */
.loading-overlay {
  position: fixed;
  inset: 0;
  background: var(--loading-overlay);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 200;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.loading-overlay.active {
  opacity: 1;
  visibility: visible;
}

.loading-spinner {
  width: 48px;
  height: 48px;
  border: 3px solid var(--border);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 16px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-text {
  color: var(--text-secondary);
  font-size: 12px;
}

/* ===================== */
/* INTERACTIVE TIMELINE  */
/* ===================== */

.flow-timeline {
  padding: 12px 16px 8px;
  position: relative;
  z-index: 10;
  flex-shrink: 0;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.flow-timeline::-webkit-scrollbar {
  display: none;
}

.timeline-track {
  display: flex;
  align-items: flex-start;
  position: relative;
  min-width: max-content;
  padding: 0 4px;
}

.timeline-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  cursor: pointer;
  transition: all 0.25s ease;
  padding: 4px 0;
  min-width: 52px;
  flex-shrink: 0;
}

.timeline-step.disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.timeline-step:not(.disabled):hover .timeline-dot {
  transform: scale(1.15);
}

.timeline-step:not(.disabled):active .timeline-dot {
  transform: scale(0.95);
}

.timeline-dot {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: var(--bg-tertiary);
  border: 2px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  position: relative;
  z-index: 2;
}

.timeline-dot svg {
  width: 12px;
  height: 12px;
  color: var(--text-muted);
  transition: all 0.3s ease;
}

.timeline-step-num {
  font-family: 'DM Mono', monospace;
  font-size: 10px;
  font-weight: 500;
  color: var(--text-muted);
}

.timeline-label {
  font-size: 9px;
  font-weight: 500;
  color: var(--text-muted);
  text-align: center;
  margin-top: 5px;
  max-width: 54px;
  line-height: 1.2;
  transition: color 0.3s ease;
  white-space: nowrap;
}

/* Timeline connector line */
.timeline-connector {
  flex: 1;
  height: 2px;
  background: var(--border);
  margin: 0 -2px;
  margin-top: 14px;
  min-width: 12px;
  position: relative;
  z-index: 1;
  transition: background 0.3s ease;
}

/* Active state */
.timeline-step.active .timeline-dot {
  background: var(--accent);
  border-color: var(--accent);
  box-shadow: 0 0 0 4px var(--accent-soft), 0 0 20px -4px var(--accent-glow);
}

.timeline-step.active .timeline-dot svg,
.timeline-step.active .timeline-step-num {
  color: var(--bg-primary);
}

.timeline-step.active .timeline-label {
  color: var(--accent);
  font-weight: 600;
}

/* Completed state */
.timeline-step.completed .timeline-dot {
  background: var(--success);
  border-color: var(--success);
}

.timeline-step.completed .timeline-dot svg {
  color: white;
}

.timeline-step.completed .timeline-label {
  color: var(--success);
}

.timeline-connector.completed {
  background: var(--success);
}

/* Reachable state - steps user has passed but can navigate back to */
.timeline-step.reachable {
  cursor: pointer;
}

.timeline-step.reachable .timeline-dot {
  background: var(--success);
  border-color: var(--success);
  opacity: 0.7;
}

.timeline-step.reachable .timeline-dot svg {
  color: white;
}

.timeline-step.reachable .timeline-label {
  color: var(--success);
  opacity: 0.7;
}

.timeline-step.reachable:hover .timeline-dot {
  opacity: 1;
  transform: scale(1.15);
}

.timeline-step.reachable:hover .timeline-label {
  opacity: 1;
}

/* Success state for final step */
.timeline-step.success .timeline-dot {
  background: var(--success);
  border-color: var(--success);
  box-shadow: 0 0 0 4px var(--success-soft), 0 0 20px -4px var(--success-glow);
}

.timeline-step.success .timeline-dot svg {
  color: white;
}

.timeline-step.success .timeline-label {
  color: var(--success);
  font-weight: 600;
}

/* Failed state for steps that encountered an error */
.timeline-step.failed .timeline-dot {
  background: var(--error, #dc2626);
  border-color: var(--error, #dc2626);
  box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.15), 0 0 20px -4px rgba(220, 38, 38, 0.4);
}

.timeline-step.failed .timeline-dot svg {
  color: white;
}

.timeline-step.failed .timeline-label {
  color: var(--error, #dc2626);
  font-weight: 600;
}

/* Failed connector */
.timeline-connector.failed {
  background: var(--error, #dc2626);
}

/* Flow error banner */
.flow-error-banner {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin: 8px 16px 0;
  padding: 12px 14px;
  background: linear-gradient(135deg, rgba(220, 38, 38, 0.1) 0%, rgba(220, 38, 38, 0.05) 100%);
  border: 1px solid rgba(220, 38, 38, 0.3);
  border-radius: var(--radius-md);
  animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.flow-error-banner > svg {
  width: 20px;
  height: 20px;
  color: var(--error, #dc2626);
  flex-shrink: 0;
  margin-top: 1px;
}

.flow-error-content {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.flow-error-message {
  font-size: 13px;
  font-weight: 600;
  color: var(--error, #dc2626);
  line-height: 1.3;
}

.flow-error-details {
  font-size: 11px;
  color: var(--text-tertiary);
  font-family: var(--font-mono);
  line-height: 1.4;
  word-break: break-all;
}

/* Hover effect for clickable steps */
.timeline-step.completed:not(.active):hover .timeline-dot {
  box-shadow: 0 0 0 3px var(--success-soft);
}

/* Compact mode for very small screens */
@media (max-height: 650px) {
  .flow-timeline {
    padding: 8px 12px 4px;
  }
  .timeline-dot {
    width: 24px;
    height: 24px;
  }
  .timeline-dot svg {
    width: 10px;
    height: 10px;
  }
  .timeline-step-num {
    font-size: 9px;
  }
  .timeline-label {
    font-size: 8px;
    margin-top: 4px;
  }
  .timeline-connector {
    margin-top: 12px;
  }
  .timeline-step {
    min-width: 46px;
  }
}

/* ===================== */
/* CUSTOMER STATE PANEL  */
/* ===================== */

.customer-state-panel {
  position: sticky;
  top: 0;
  z-index: 9;
  padding: 8px 16px 0;
  display: none;
  flex-shrink: 0;
}

.customer-state-panel.visible {
  display: block;
}

/* ========== NEW Customer Card Design ========== */
.customer-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Header: Avatar + Name/ID + Badges */
.customer-card-header {
  display: flex;
  align-items: center;
  gap: 10px;
}

.customer-card-identity {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.customer-card-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.3;
}

.customer-card-sub-id {
  font-size: 12px;
  font-weight: 600;
  color: var(--brand-primary);
  font-family: var(--font-mono);
  letter-spacing: 0.3px;
}

.customer-card-badges {
  display: flex;
  gap: 4px;
  flex-shrink: 0;
}

/* Details Grid: Contact, Plan, Battery */
.customer-card-details {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding-top: 10px;
  border-top: 1px solid var(--border-subtle);
}

.customer-detail-item {
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 11px;
  color: var(--text-secondary);
  background: var(--bg-tertiary);
  padding: 5px 10px;
  border-radius: var(--radius-sm);
  max-width: 100%;
}

.customer-detail-item svg {
  color: var(--text-muted);
  flex-shrink: 0;
  width: 12px;
  height: 12px;
}

.customer-detail-item span {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.customer-detail-battery {
  background: rgba(34, 197, 94, 0.1);
  color: var(--success);
}

.customer-detail-battery svg {
  color: var(--success);
}

/* ========== Legacy styles for backward compatibility ========== */
.customer-state-inner {
  display: flex;
  align-items: center;
  gap: 10px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: 10px 12px;
}

/* Customer Identity */
.state-customer {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
  min-width: 0;
}

.state-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--accent-soft);
  color: var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 600;
  flex-shrink: 0;
}

.state-customer-info {
  flex: 1;
  min-width: 0;
}

.state-customer-name {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 2px;
}

.state-info-icon {
  color: var(--text-muted);
  flex-shrink: 0;
}

.state-plan-row {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  color: var(--text-secondary);
  flex-wrap: wrap;
  min-width: 0;
  margin-bottom: 2px;
}

.state-contact-row {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-top: 4px;
}

.state-contact-item {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  color: var(--text-secondary);
}

.state-contact-item span {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 140px;
}

.state-plan-name {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 90px;
  flex-shrink: 1;
}

.state-subscription-id {
  font-weight: 600;
  color: var(--accent);
  white-space: nowrap;
  font-family: var(--font-mono);
}

.state-plan-separator {
  color: var(--text-muted);
  opacity: 0.5;
}

/* State badges container - simple side-by-side layout */
.state-badges {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}

/* Right section container - groups badges and battery on right */
.state-right-section {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-left: auto;
  flex-shrink: 0;
}

/* Horizontal badges for right side layout */
.state-badges-vertical {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 4px;
}

/* State badge groups - contains label + badge (legacy) */
.state-badge-group {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  flex-shrink: 0;
  max-width: 100px;
}

.state-badge-label {
  font-size: 8px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.2px;
  opacity: 0.7;
  white-space: nowrap;
}

.state-badge-group.service .state-badge-label {
  color: var(--accent);
}

.state-badge-group.payment .state-badge-label {
  color: var(--success);
}

/* Status badges */
.state-badge {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  padding: 2px 6px;
  border-radius: 10px;
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  white-space: nowrap;
  max-width: 70px;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Service Cycle FSM States - Cyan/Teal palette */
.state-badge.service-battery-issued {
  background: var(--accent-soft);
  color: var(--accent);
}

.state-badge.service-wait-battery {
  background: rgba(147, 112, 219, 0.15);
  color: #9370db;
}

.state-badge.service-battery-returned {
  background: rgba(100, 149, 237, 0.15);
  color: #6495ed;
}

.state-badge.service-battery-lost {
  background: var(--error-soft);
  color: var(--error);
}

.state-badge.service-complete {
  background: var(--bg-tertiary);
  color: var(--text-secondary);
}

.state-badge.service-initial {
  background: var(--bg-tertiary);
  color: var(--text-tertiary);
}

/* Payment Cycle FSM States - Green/Orange/Red palette */
.state-badge.payment-current {
  background: var(--success-soft);
  color: var(--success);
}

.state-badge.payment-deposit-due {
  background: rgba(240, 165, 0, 0.15);
  color: #f0a500;
}

.state-badge.payment-renewal-due {
  background: rgba(255, 140, 0, 0.15);
  color: #ff8c00;
}

.state-badge.payment-final-due {
  background: var(--error-soft);
  color: var(--error);
}

.state-badge.payment-complete {
  background: var(--bg-tertiary);
  color: var(--text-secondary);
}

.state-badge.payment-initial {
  background: var(--bg-tertiary);
  color: var(--text-tertiary);
}

/* Legacy badge styles (for backwards compatibility) */
.state-badge.active {
  background: var(--success-soft);
  color: var(--success);
}

.state-badge.current {
  background: var(--accent-soft);
  color: var(--accent);
}

.state-badge.overdue {
  background: var(--error-soft);
  color: var(--error);
}

/* Battery indicator */
.state-battery {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  background: var(--bg-tertiary);
  border-radius: 6px;
  flex-shrink: 0;
}

.state-battery-icon {
  width: 16px;
  height: 10px;
  border: 1.5px solid var(--success);
  border-radius: 2px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding: 1px;
}

.state-battery-icon::after {
  content: '';
  position: absolute;
  right: -4px;
  top: 50%;
  transform: translateY(-50%);
  width: 2px;
  height: 5px;
  background: var(--success);
  border-radius: 0 1px 1px 0;
}

.state-battery-fill {
  height: 100%;
  width: var(--level, 100%);
  background: var(--success);
  border-radius: 1px;
}

.state-battery-id {
  font-size: 9px;
  font-weight: 500;
  font-family: 'DM Mono', monospace;
  color: var(--text-secondary);
}

/* Quota summary - compact horizontal layout */
.state-quotas {
  display: none;
  flex-direction: column;
  gap: 8px;
  margin: 8px 16px 0;
  padding-bottom: 12px;
}

.state-quotas.visible {
  display: flex;
}

.state-quota-item {
  display: flex;
  align-items: center;
  gap: 6px;
  flex: 1;
  padding: 8px 10px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
}

.state-quota-icon {
  width: 20px;
  height: 20px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.state-quota-icon.energy {
  background: rgba(255, 200, 50, 0.15);
  color: #ffc832;
}

.state-quota-icon.swaps {
  background: var(--accent-soft);
  color: var(--accent);
}

.state-quota-icon svg {
  width: 12px;
  height: 12px;
}

.state-quota-info {
  flex: 1;
  min-width: 0;
}

.state-quota-value {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-primary);
  display: flex;
  align-items: baseline;
  gap: 3px;
}

.state-quota-value .remaining {
  font-family: 'DM Mono', monospace;
}

.state-quota-value .unit {
  font-size: 9px;
  font-weight: 500;
  color: var(--text-secondary);
}

/* Monetary value display for remaining quota */
.state-quota-value .quota-value {
  font-size: 10px;
  font-weight: 600;
  color: var(--accent);
  margin-left: 4px;
  white-space: nowrap;
}

.state-quota-bar {
  height: 3px;
  background: var(--border);
  border-radius: 2px;
  margin-top: 3px;
  overflow: hidden;
}

.state-quota-fill {
  height: 100%;
  border-radius: 2px;
  transition: width 0.3s ease;
}

.state-quota-fill.good {
  background: var(--success);
}

.state-quota-fill.warning {
  background: #f0a500;
}

.state-quota-fill.critical {
  background: var(--error);
}

/* Compact mode for small screens */
@media (max-height: 700px) {
  .customer-state-panel {
    padding: 6px 12px 0;
  }
  
  .customer-state-inner {
    padding: 8px 10px;
  }
  
  .state-avatar {
    width: 28px;
    height: 28px;
    font-size: 10px;
  }
  
  .state-customer-name {
    font-size: 11px;
  }
  
  .state-plan-row {
    font-size: 9px;
  }
  
  .state-right-section {
    gap: 6px;
  }
  
  .state-badges-vertical {
    gap: 3px;
  }
  
  .state-quotas {
    margin: 8px 12px 0;
    padding-bottom: 10px;
    gap: 6px;
  }
  
  .state-quota-item {
    padding: 6px 8px;
  }
  
  .state-quota-icon {
    width: 16px;
    height: 16px;
  }
  
  .state-quota-icon svg {
    width: 10px;
    height: 10px;
  }
  
  .state-quota-value {
    font-size: 11px;
  }
  
  .state-quota-value .quota-value {
    font-size: 9px;
  }
}

/* ========================================== */
/* UNIFIED CUSTOMER PANEL (Compact Design)   */
/* ========================================== */

.customer-panel-unified {
  position: sticky;
  top: 0;
  z-index: 9;
  margin: 8px 16px 0;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: 10px 12px;
  display: none;
  flex-direction: column;
  gap: 8px;
  flex-shrink: 0;
}

.customer-panel-unified.visible {
  display: flex;
}

/* Main row: Avatar + Identity + Badges */
.panel-row-main {
  display: flex;
  align-items: center;
  gap: 10px;
}

.panel-identity {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.panel-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.2;
}

.panel-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.panel-sub-code {
  font-size: 11px;
  font-weight: 600;
  color: var(--brand-primary);
  font-family: var(--font-mono);
  letter-spacing: 0.3px;
}

.panel-template {
  display: flex;
  align-items: center;
  gap: 3px;
  font-size: 10px;
  color: var(--text-secondary);
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: var(--radius-xs);
}

.panel-template svg {
  width: 9px;
  height: 9px;
  flex-shrink: 0;
  opacity: 0.7;
}

/* Right column: Badges + Phone stacked */
.panel-right-col {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 3px;
  flex-shrink: 0;
}

.panel-badges {
  display: flex;
  gap: 4px;
}

.panel-phone {
  display: flex;
  align-items: center;
  gap: 3px;
  font-size: 9px;
  color: var(--text-muted);
}

.panel-phone svg {
  width: 9px;
  height: 9px;
  flex-shrink: 0;
  opacity: 0.7;
}

/* Services row: Quotas + Battery inline */
.panel-row-services {
  display: flex;
  align-items: center;
  gap: 10px;
  padding-top: 8px;
  border-top: 1px solid var(--border-subtle);
  flex-wrap: wrap;
}

/* When only 1 quota is shown, push battery to the right */
.panel-row-services.single-quota {
  justify-content: space-between;
}

.panel-row-services.single-quota .panel-quota {
  flex: 0 0 auto;
}

.panel-row-services.single-quota .panel-battery {
  margin-left: auto;
}

/* Mini quota display */
.panel-quota {
  display: flex;
  align-items: center;
  gap: 6px;
  flex: 1;
  min-width: 100px;
  max-width: 140px;
}

.quota-icon {
  flex-shrink: 0;
}

.quota-icon.energy {
  color: var(--color-warning);
}

.quota-icon.swaps {
  color: var(--accent);
}

.quota-info {
  display: flex;
  align-items: baseline;
  gap: 2px;
}

.quota-value {
  font-size: 13px;
  font-weight: 700;
  font-family: var(--font-mono);
  color: var(--text-primary);
}

.quota-unit {
  font-size: 9px;
  color: var(--text-muted);
  text-transform: lowercase;
}

.quota-bar-mini {
  flex: 1;
  height: 4px;
  background: var(--border);
  border-radius: 2px;
  overflow: hidden;
  min-width: 30px;
}

.quota-bar-fill {
  height: 100%;
  border-radius: 2px;
  transition: width 0.3s ease;
}

/* Battery display */
.panel-battery {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  background: rgba(34, 197, 94, 0.1);
  border-radius: var(--radius-sm);
  font-size: 10px;
  font-weight: 600;
  font-family: var(--font-mono);
  color: var(--success);
}

.panel-battery svg {
  width: 12px;
  height: 12px;
  flex-shrink: 0;
}

/* Responsive adjustments for unified panel */
@media (max-height: 700px) {
  .customer-panel-unified {
    margin: 6px 12px 0;
    padding: 8px 10px;
    gap: 6px;
  }
  
  .panel-name {
    font-size: 12px;
  }
  
  .panel-sub-code {
    font-size: 10px;
  }
  
  .panel-row-services {
    padding-top: 6px;
    gap: 8px;
  }
  
  .quota-value {
    font-size: 12px;
  }
}

@media (max-width: 360px) {
  .panel-quota {
    min-width: 80px;
    max-width: 110px;
  }
  
  .quota-bar-mini {
    display: none;
  }
}

/* ===================== */
/* BATTERY RETURN CARD   */
/* ===================== */

.battery-return-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: 10px;
  margin-bottom: 8px;
}

.battery-return-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
}

.battery-return-label {
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  font-weight: 600;
}

.battery-return-status {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 10px;
  background: var(--success-soft);
  color: var(--success);
}

.battery-return-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.battery-return-id {
  font-family: 'DM Mono', monospace;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
}

.battery-return-charge {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background: var(--bg-tertiary);
  border-radius: 6px;
}

.battery-return-icon {
  width: 18px;
  height: 12px;
  border: 2px solid var(--border);
  border-radius: 2px;
  position: relative;
  overflow: hidden;
}

.battery-return-icon::after {
  content: '';
  position: absolute;
  right: -5px;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 6px;
  background: var(--border);
  border-radius: 0 2px 2px 0;
}

.battery-return-icon.low {
  border-color: var(--error);
}

.battery-return-icon.low::after {
  background: var(--error);
}

.battery-return-icon.medium {
  border-color: #f59e0b;
}

.battery-return-icon.medium::after {
  background: #f59e0b;
}

.battery-return-icon.full {
  border-color: var(--success);
}

.battery-return-icon.full::after {
  background: var(--success);
}

.battery-return-fill {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: var(--level, 35%);
}

.battery-return-icon.low .battery-return-fill {
  background: var(--error);
}

.battery-return-icon.medium .battery-return-fill {
  background: #f59e0b;
}

.battery-return-icon.full .battery-return-fill {
  background: var(--success);
}

.battery-return-percent {
  font-family: 'DM Mono', monospace;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-primary);
}

.battery-return-unit {
  font-size: 10px;
  color: var(--text-muted);
}

/* ================================ */
/* BATTERY SCANNED CARD (Sales)     */
/* ================================ */

.battery-scanned-card {
  background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
  border: 1px solid var(--success);
  border-radius: var(--radius-lg);
  padding: 16px;
  margin-bottom: 16px;
  box-shadow: 0 0 20px -5px var(--success-glow);
}

.battery-scanned-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--border);
}

.battery-scanned-icon-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  background: var(--success-soft);
  border-radius: var(--radius-md);
}

.battery-scanned-icon-wrapper .battery-icon {
  color: var(--success);
}

.battery-scanned-icon-wrapper .battery-icon.full {
  color: var(--success);
}

.battery-scanned-icon-wrapper .battery-icon.medium {
  color: #f59e0b;
}

.battery-scanned-icon-wrapper .battery-icon.low {
  color: var(--error);
}

.battery-scanned-icon-wrapper .battery-check-icon {
  position: absolute;
  bottom: -2px;
  right: -2px;
  background: var(--success);
  border-radius: 50%;
  padding: 2px;
  color: var(--bg-primary);
}

.battery-scanned-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.battery-scanned-label {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  font-weight: 600;
}

.battery-scanned-id {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
}

.battery-scanned-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-bottom: 12px;
}

.battery-stat {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--bg-elevated);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
}

.battery-stat-icon {
  color: var(--accent);
  flex-shrink: 0;
}

.battery-stat-icon.full {
  color: var(--success);
}

.battery-stat-icon.medium {
  color: #f59e0b;
}

.battery-stat-icon.low {
  color: var(--error);
}

.battery-stat-content {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.battery-stat-value {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.battery-stat-label {
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  color: var(--text-muted);
}

.battery-charge-bar {
  height: 6px;
  background: var(--bg-elevated);
  border-radius: 3px;
  overflow: hidden;
  margin-top: 4px;
}

.battery-charge-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.3s ease;
}

.battery-charge-fill.full {
  background: linear-gradient(90deg, var(--success) 0%, var(--success-glow) 100%);
}

.battery-charge-fill.medium {
  background: linear-gradient(90deg, #f59e0b 0%, #fbbf24 100%);
}

.battery-charge-fill.low {
  background: linear-gradient(90deg, var(--error) 0%, #ff8080 100%);
}

/* Complete Service Button */
.complete-service-btn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 14px 24px;
  margin-top: 16px;
  background: linear-gradient(135deg, var(--success) 0%, var(--success-dark, #00a878) 100%);
  color: white;
  font-size: 14px;
  font-weight: 600;
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 4px 16px -4px var(--success-glow);
}

.complete-service-btn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 6px 20px -4px var(--success-glow);
}

.complete-service-btn:active:not(:disabled) {
  transform: translateY(0);
}

.complete-service-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.complete-service-btn .btn-spinner {
  width: 18px;
  height: 18px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ===================== */
/* BLUETOOTH NOTICE      */
/* ===================== */

.bluetooth-notice {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  margin: 0 auto 16px;
  padding: 12px 14px;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.12) 0%, rgba(59, 130, 246, 0.06) 100%);
  border: 1px solid rgba(59, 130, 246, 0.35);
  border-radius: var(--radius-md);
  max-width: 280px;
}

.bluetooth-notice-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background: rgba(59, 130, 246, 0.15);
  border-radius: 50%;
  flex-shrink: 0;
  color: #3b82f6;
  animation: bluetoothPulse 2s ease-in-out infinite;
}

@keyframes bluetoothPulse {
  0%, 100% { 
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
    transform: scale(1);
  }
  50% { 
    box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
    transform: scale(1.02);
  }
}

.bluetooth-notice-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.bluetooth-notice-title {
  font-size: 12px;
  font-weight: 600;
  color: #3b82f6;
  letter-spacing: -0.01em;
}

.bluetooth-notice-text {
  font-size: 11px;
  color: var(--text-secondary);
  line-height: 1.4;
}

/* BLE Scanning Active State */
.ble-scanning-active {
  border-color: var(--color-success);
  background: linear-gradient(135deg, 
    var(--color-success-soft) 0%, 
    var(--color-info-soft) 100%);
}

.ble-scanning-active .bluetooth-notice-icon {
  background: var(--color-success-soft);
  border-color: var(--color-success);
}

.ble-scanning-active .bluetooth-notice-title {
  color: var(--color-success);
}

.ble-scanning-icon {
  animation: ble-pulse 1.5s ease-in-out infinite;
  color: var(--color-success) !important;
}

@keyframes ble-pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.6;
    transform: scale(1.1);
  }
}

/* ===================== */
/* BLE PROGRESS OVERLAY  */
/* ===================== */

.ble-progress-container {
  position: relative;
  background: linear-gradient(145deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 24px 20px;
  box-shadow: var(--shadow-card);
}

/* Close Icon - Top Right Cancel Button */
.ble-progress-close-icon {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s ease;
  z-index: 10;
}

.ble-progress-close-icon svg {
  width: 18px;
  height: 18px;
  color: var(--text-secondary);
  transition: color 0.2s ease;
}

.ble-progress-close-icon:hover {
  background: var(--color-error-soft);
  border-color: var(--color-error);
}

.ble-progress-close-icon:hover svg {
  color: var(--color-error);
}

.ble-progress-close-icon:active {
  transform: scale(0.95);
  background: var(--color-error-soft);
}

.ble-progress-header {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 20px;
}

.ble-progress-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(59, 130, 246, 0.1) 100%);
  border-radius: 50%;
  flex-shrink: 0;
  animation: iconPulse 1.5s ease-in-out infinite;
}

@keyframes iconPulse {
  0%, 100% { 
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
  }
  50% { 
    box-shadow: 0 0 0 12px rgba(59, 130, 246, 0);
  }
}

.ble-progress-icon svg {
  width: 24px;
  height: 24px;
  color: var(--color-info);
}

.ble-progress-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  letter-spacing: -0.02em;
}

/* Battery ID display in progress modal */
.ble-battery-id {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 16px;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%);
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: var(--radius-md);
  margin-bottom: 16px;
}

.ble-battery-id-label {
  font-size: 13px;
  color: var(--text-secondary);
  font-weight: 500;
}

.ble-battery-id-value {
  font-size: 15px;
  font-weight: 700;
  color: var(--color-info);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  letter-spacing: 0.05em;
}

.ble-progress-bar-container {
  margin-bottom: 16px;
}

.ble-progress-bar-bg {
  width: 100%;
  height: 8px;
  background: var(--bg-primary);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 8px;
}

.ble-progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-info) 0%, var(--color-info-light) 50%, var(--accent) 100%);
  border-radius: 4px;
  transition: width 0.3s ease-out;
  position: relative;
  overflow: hidden;
}

.ble-progress-bar-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.2) 50%,
    transparent 100%
  );
  animation: shimmer 1.5s ease-in-out infinite;
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.ble-progress-percent {
  font-family: 'DM Mono', monospace;
  font-size: 24px;
  font-weight: 600;
  color: var(--text-primary);
  text-align: center;
}

.ble-progress-status {
  text-align: center;
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 20px;
  min-height: 20px;
}

.ble-progress-steps {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 24px;
}

.ble-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  opacity: 0.4;
  transition: all 0.3s ease;
}

.ble-step.active {
  opacity: 1;
}

.ble-step.completed {
  opacity: 1;
}

.ble-step-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--border);
  transition: all 0.3s ease;
  position: relative;
}

.ble-step.active .ble-step-dot {
  background: var(--color-info);
  box-shadow: 0 0 0 4px var(--color-info-soft);
}

.ble-step.active .ble-step-dot::before {
  content: '';
  position: absolute;
  inset: 2px;
  background: var(--bg-primary);
  border-radius: 50%;
  animation: dotPulse 1s ease-in-out infinite;
}

@keyframes dotPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.ble-step.completed .ble-step-dot {
  background: var(--success);
}

.ble-step.completed .ble-step-dot::before {
  content: '';
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 8px;
  color: white;
  font-weight: bold;
  animation: none;
  background: none;
}

.ble-step span {
  font-size: 10px;
  font-weight: 500;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  transition: color 0.3s ease;
}

.ble-step.active span {
  color: var(--color-info);
}

.ble-step.completed span {
  color: var(--success);
}

/* BLE Cancel Button */
.ble-cancel-button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-top: 20px;
  padding: 12px 24px;
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: rgba(255, 255, 255, 0.7);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  width: 100%;
}

.ble-cancel-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.3);
  color: white;
}

.ble-cancel-button:active {
  transform: scale(0.98);
}

.ble-cancel-button svg {
  width: 16px;
  height: 16px;
}

/* BLE Progress Help Text */
.ble-progress-help {
  margin-top: 16px;
  font-size: 12px;
  color: var(--text-muted);
  text-align: center;
  line-height: 1.5;
}

/* BLE Progress Cancel Button - Escape hatch for stuck connections */
.ble-progress-cancel-button {
  margin-top: 20px;
  padding: 12px 24px;
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  color: rgba(255, 255, 255, 0.6);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  width: 100%;
}

.ble-progress-cancel-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.3);
  color: rgba(255, 255, 255, 0.9);
}

.ble-progress-cancel-button:active {
  background: rgba(255, 255, 255, 0.15);
  transform: scale(0.98);
}

/* BLE Progress Icon Warning State */
.ble-progress-icon-warning {
  background: linear-gradient(145deg, #fbbf24 0%, #f59e0b 100%);
  border: 2px solid rgba(251, 191, 36, 0.5);
  animation: none; /* Remove pulse for warning state */
}

.ble-progress-icon-warning svg {
  color: #1c1c1e;
}

/* BLE Bluetooth Reset Instructions */
.ble-reset-instructions {
  margin: 16px 0;
  padding: 16px;
  background: var(--color-warning-soft);
  border: 1px solid var(--color-warning);
  border-radius: 12px;
}

.ble-reset-steps {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.ble-reset-step {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 14px;
  color: var(--text-primary);
}

.ble-reset-step-number {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: linear-gradient(145deg, #fbbf24 0%, #f59e0b 100%);
  color: #1c1c1e;
  font-weight: 700;
  font-size: 13px;
  border-radius: 50%;
  flex-shrink: 0;
}

/* BLE Cancel Button Primary Variant (for Bluetooth reset) */
.ble-cancel-button-primary {
  background: linear-gradient(145deg, #3b82f6 0%, #2563eb 100%);
  border-color: rgba(59, 130, 246, 0.5);
  color: white;
}

.ble-cancel-button-primary:hover {
  background: linear-gradient(145deg, #60a5fa 0%, #3b82f6 100%);
  border-color: rgba(96, 165, 250, 0.5);
}

/* BLE Countdown Timer */
.ble-countdown-timer {
  margin: 12px 0 16px;
  padding: 12px 16px;
  background: var(--color-info-soft);
  border: 1px solid var(--color-info);
  border-radius: 10px;
  text-align: center;
}

.ble-countdown-text {
  font-size: 14px;
  color: var(--text-primary);
  line-height: 1.4;
}

.ble-countdown-text strong {
  color: var(--color-info);
  font-weight: 600;
  font-family: 'DM Mono', monospace;
}

.ble-countdown-expired {
  font-size: 13px;
  color: var(--color-warning);
  line-height: 1.5;
}

/* Small screen adjustments for BLE progress */
@media (max-height: 650px) {
  .ble-progress-container {
    padding: 18px 16px;
  }
  
  .ble-progress-icon {
    width: 40px;
    height: 40px;
  }
  
  .ble-progress-icon svg {
    width: 20px;
    height: 20px;
  }
  
  .ble-progress-title {
    font-size: 16px;
  }
  
  .ble-progress-percent {
    font-size: 20px;
  }
  
  .ble-progress-status {
    font-size: 12px;
    margin-bottom: 16px;
  }
  
  .ble-progress-steps {
    gap: 16px;
  }
  
  .ble-step-dot {
    width: 10px;
    height: 10px;
  }
  
  .ble-step span {
    font-size: 9px;
  }
  
  .ble-cancel-button {
    margin-top: 14px;
    padding: 10px 20px;
    font-size: 13px;
  }
  
  .ble-progress-close-icon {
    top: 10px;
    right: 10px;
    width: 32px;
    height: 32px;
  }
  
  .ble-progress-close-icon svg {
    width: 16px;
    height: 16px;
  }
  
  .ble-progress-help {
    margin-top: 12px;
    font-size: 11px;
  }
  
  .ble-countdown-timer {
    margin: 10px 0 12px;
    padding: 10px 12px;
  }
  
  .ble-countdown-text {
    font-size: 12px;
  }
  
  .ble-countdown-expired {
    font-size: 11px;
  }
  
  .ble-reset-instructions {
    margin: 12px 0;
    padding: 12px;
  }
  
  .ble-reset-steps {
    gap: 10px;
  }
  
  .ble-reset-step {
    font-size: 13px;
    gap: 10px;
  }
  
  .ble-reset-step-number {
    width: 22px;
    height: 22px;
    font-size: 12px;
  }
}

/* Bluetooth Reminder Banner - Shown on battery scan pages */
.bluetooth-reminder {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px 16px;
  margin-bottom: 16px;
  background: linear-gradient(145deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%);
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: 12px;
}

.bluetooth-reminder-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  min-width: 36px;
  background: linear-gradient(145deg, #3b82f6 0%, #2563eb 100%);
  border-radius: 50%;
  color: white;
}

.bluetooth-reminder-content {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.bluetooth-reminder-title {
  font-size: 14px;
  font-weight: 600;
  color: #60a5fa;
}

.bluetooth-reminder-text {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.7);
  line-height: 1.4;
}

/* Small screen adjustments for Bluetooth reminder */
@media (max-height: 650px) {
  .bluetooth-reminder {
    padding: 10px 12px;
    margin-bottom: 12px;
    gap: 10px;
  }
  
  .bluetooth-reminder-icon {
    width: 32px;
    height: 32px;
    min-width: 32px;
  }
  
  .bluetooth-reminder-icon svg {
    width: 16px;
    height: 16px;
  }
  
  .bluetooth-reminder-title {
    font-size: 13px;
  }
  
  .bluetooth-reminder-text {
    font-size: 11px;
  }
}

/* ================================================= */
/* BLE CONNECTION PROGRESS - Enhanced UX Components  */
/* ================================================= */

.ble-connection-progress {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px 24px;
  min-height: 300px;
  text-align: center;
}

.connection-spinner-container {
  position: relative;
  margin-bottom: 24px;
}

.connection-spinner {
  position: relative;
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.connection-spinner .spinner-ring {
  position: absolute;
  inset: 0;
  border: 3px solid rgba(59, 130, 246, 0.2);
  border-top-color: #3b82f6;
  border-radius: 50%;
  animation: spinnerRotate 1s linear infinite;
}

@keyframes spinnerRotate {
  to { transform: rotate(360deg); }
}

.spinner-phase-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  background: linear-gradient(145deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.05) 100%);
  border-radius: 50%;
  color: #3b82f6;
  animation: phaseIconPulse 2s ease-in-out infinite;
}

@keyframes phaseIconPulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(0.95); }
}

.spinner-phase-icon svg {
  width: 24px;
  height: 24px;
}

/* Phase Info */
.connection-phase-info {
  margin-bottom: 20px;
}

.connection-phase-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 4px;
}

.connection-phase-subtitle {
  font-size: 14px;
  color: var(--text-secondary);
  margin: 0;
}

/* Progress Container */
.connection-progress-container {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  max-width: 240px;
  margin-bottom: 16px;
}

.connection-progress-bar {
  flex: 1;
  height: 6px;
  background: var(--color-info-soft);
  border-radius: 3px;
  overflow: hidden;
}

.connection-progress-bar .progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-info) 0%, var(--color-info-light) 50%, var(--accent) 100%);
  border-radius: 3px;
  transition: width 0.3s ease-out;
  position: relative;
}

.connection-progress-bar .progress-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.3) 50%,
    transparent 100%
  );
  animation: shimmer 1.5s ease-in-out infinite;
}

.connection-progress-percent {
  font-size: 13px;
  font-weight: 600;
  color: #3b82f6;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  min-width: 36px;
}

/* Elapsed Time */
.connection-elapsed-time {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 16px;
  padding: 6px 12px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 20px;
}

.connection-elapsed-time svg {
  opacity: 0.7;
}

/* Countdown Timer (in BatteryScanBind) */
.connection-countdown {
  margin-bottom: 12px;
  padding: 10px 14px;
  background: rgba(59, 130, 246, 0.1);
  border: 1px solid rgba(59, 130, 246, 0.25);
  border-radius: 10px;
  text-align: center;
  max-width: 280px;
}

.countdown-text {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.4;
}

.countdown-text strong {
  color: #60a5fa;
  font-weight: 600;
  font-family: 'DM Mono', monospace;
}

.countdown-expired {
  font-size: 12px;
  color: #fbbf24;
  line-height: 1.5;
}

/* Tip Section */
.connection-tip {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 12px 16px;
  background: linear-gradient(145deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.05) 100%);
  border: 1px solid rgba(59, 130, 246, 0.2);
  border-radius: 12px;
  margin-bottom: 16px;
  max-width: 280px;
  text-align: left;
}

.connection-tip svg {
  flex-shrink: 0;
  color: #fbbf24;
  margin-top: 2px;
}

.connection-tip .tip-text {
  font-size: 13px;
  color: var(--text-secondary);
  margin: 0;
  line-height: 1.4;
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Patience Message */
.connection-patience-message {
  margin-bottom: 16px;
}

.connection-patience-message p {
  font-size: 12px;
  color: rgba(251, 191, 36, 0.9);
  margin: 0;
  font-style: italic;
}

/* Cancel Button */
.connection-cancel-btn {
  margin-top: 8px;
}

/* Error State */
.ble-error-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px 24px;
  text-align: center;
}

.ble-error-state .error-icon {
  width: 56px;
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(239, 68, 68, 0.15);
  border-radius: 50%;
  margin-bottom: 16px;
}

.ble-error-state .error-icon svg {
  width: 28px;
  height: 28px;
  color: #ef4444;
}

.ble-error-state .error-message {
  font-size: 14px;
  color: var(--text-secondary);
  margin: 0 0 20px;
  max-width: 280px;
  line-height: 1.5;
}

.ble-error-state .error-actions {
  display: flex;
  gap: 12px;
}

/* Small screen adjustments */
@media (max-height: 650px) {
  .ble-connection-progress {
    padding: 24px 20px;
    min-height: 250px;
  }
  
  .connection-spinner {
    width: 64px;
    height: 64px;
  }
  
  .spinner-phase-icon {
    width: 40px;
    height: 40px;
  }
  
  .spinner-phase-icon svg {
    width: 20px;
    height: 20px;
  }
  
  .connection-phase-title {
    font-size: 16px;
  }
  
  .connection-phase-subtitle {
    font-size: 13px;
  }
  
  .connection-tip {
    padding: 10px 12px;
  }
  
  .connection-tip .tip-text {
    font-size: 12px;
  }
}

/* ===================== */
/* RESUME SESSION MODAL  */
/* ===================== */

.resume-session-modal {
  background: linear-gradient(145deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
  border: 1px solid var(--border);
  border-radius: var(--radius-xl);
  padding: 28px 24px;
  max-width: 340px;
  width: 100%;
  text-align: center;
  box-shadow: 0 25px 80px -20px rgba(0, 0, 0, 0.6);
  animation: modalSlideUp 0.3s ease-out;
}

@keyframes modalSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.resume-session-icon {
  width: 56px;
  height: 56px;
  margin: 0 auto 16px;
  border-radius: 50%;
  background: linear-gradient(145deg, var(--accent-soft) 0%, rgba(0, 229, 229, 0.08) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(0, 229, 229, 0.25);
}

.resume-session-icon svg {
  width: 28px;
  height: 28px;
  color: var(--accent);
}

.resume-session-title {
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-xl);
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 8px;
}

.resume-session-description {
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-md);
  color: var(--text-secondary);
  margin-bottom: 16px;
}

.resume-session-details {
  background: var(--bg-primary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-md);
  padding: 14px 16px;
  margin-bottom: 20px;
}

.resume-session-customer {
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-lg);
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 6px;
}

.resume-session-meta {
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-sm);
  color: var(--text-muted);
}

.resume-session-actions {
  display: flex;
  gap: 12px;
}

.resume-session-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 16px;
  border-radius: var(--radius-md);
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-md);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 1px solid transparent;
}

.resume-session-btn-primary {
  background: linear-gradient(145deg, var(--accent) 0%, var(--accent-dark) 100%);
  color: var(--bg-primary);
  border-color: var(--accent);
  box-shadow: 0 4px 16px -4px var(--accent-glow);
}

.resume-session-btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 20px -4px var(--accent-glow);
}

.resume-session-btn-primary:active {
  transform: translateY(0);
}

.resume-session-btn-secondary {
  background: transparent;
  color: var(--text-secondary);
  border-color: var(--border);
}

.resume-session-btn-secondary:hover {
  background: var(--bg-elevated);
  color: var(--text-primary);
  border-color: var(--text-muted);
}

.resume-session-btn-secondary:active {
  transform: scale(0.98);
}

/* Small screen adjustments */
@media (max-width: 400px) {
  .resume-session-modal {
    padding: 22px 18px;
  }

  .resume-session-icon {
    width: 48px;
    height: 48px;
    margin-bottom: 14px;
  }

  .resume-session-icon svg {
    width: 24px;
    height: 24px;
  }

  .resume-session-title {
    font-size: var(--font-lg);
  }

  .resume-session-description {
    font-size: var(--font-base);
  }

  .resume-session-actions {
    flex-direction: column;
    gap: 10px;
  }

  .resume-session-btn {
    padding: 14px 16px;
  }
}

/* ===================== */
/* SALES REP MODULE      */
/* ===================== */

.sales-flow-container,
.sales-container {
  position: fixed;
  inset: 0;
  background: var(--bg-primary);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: 100;
}

/* Sales screen container - for non-flow screens */
.sales-screen-container {
  flex: 1;
  overflow-y: auto;
  padding-bottom: 20px;
  -webkit-overflow-scrolling: touch;
}

.sales-main-screen {
  flex: 1;
  overflow-y: auto;
  padding-bottom: 70px; /* Space for bottom nav */
}

/* Sales Nav - inherits from .bottom-nav */
.sales-nav {
  /* Uses base .bottom-nav styles - matches Rider design */
}

/* Sales Bottom Fixed - contains action bar and navigation together */
.sales-bottom-fixed {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 100;
  display: flex;
  flex-direction: column;
  pointer-events: none;
  max-width: 430px;
  margin: 0 auto;
}

.sales-bottom-fixed > * {
  pointer-events: auto;
}

/* When inside sales-bottom-fixed wrapper, action bar is not fixed anymore */
.sales-bottom-fixed .action-bar {
  position: relative;
  bottom: auto;
  left: auto;
  transform: none;
  width: 100%;
  max-width: 100%;
  padding: 8px 16px;
  background: linear-gradient(to top, var(--bg-primary) 90%, transparent);
}

/* When inside sales-bottom-fixed wrapper, nav is not fixed anymore */
.sales-bottom-fixed .sales-nav,
.sales-bottom-fixed .bottom-nav {
  position: relative;
  bottom: auto;
  left: auto;
  right: auto;
  z-index: auto;
}

@media (max-height: 700px) {
  .sales-bottom-fixed .action-bar {
    padding: 6px 12px;
  }
}

.sales-bg-gradient {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 300px;
  background: radial-gradient(ellipse 80% 50% at 50% -20%, var(--accent-soft) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
}

/* Sales Main Content */
.sales-main {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0 16px 100px;
  position: relative;
  z-index: 5;
  max-width: 430px;
  margin: 0 auto;
  width: 100%;
}

/* Product Selection Grid */
.product-grid {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.product-card {
  background: var(--bg-secondary);
  border: 2px solid var(--border);
  border-radius: var(--radius-md);
  padding: 10px 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 10px;
  min-height: 68px;
  height: 68px;
}

.product-card:hover {
  border-color: var(--accent);
}

.product-card.selected {
  border-color: var(--accent);
  background: var(--accent-soft);
}

.product-radio {
  width: 16px;
  height: 16px;
  border: 2px solid var(--border);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all 0.2s ease;
}

.product-card.selected .product-radio {
  border-color: var(--accent);
  background: var(--accent);
}

.product-radio::after {
  content: '';
  width: 6px;
  height: 6px;
  background: white;
  border-radius: 50%;
  opacity: 0;
  transform: scale(0);
  transition: all 0.2s ease;
}

.product-card.selected .product-radio::after {
  opacity: 1;
  transform: scale(1);
}

.product-info {
  flex: 1;
  min-width: 0;
  overflow: hidden;
}

.product-name {
  font-size: 12px;
  font-weight: 500;
  margin-bottom: 2px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.3;
}

.product-desc {
  font-size: 10px;
  color: var(--text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.product-price {
  font-family: 'DM Mono', monospace;
  font-size: 12px;
  font-weight: 600;
  color: var(--accent);
}

.product-price-period {
  font-size: 9px;
  color: var(--text-muted);
  font-weight: 400;
}

/* Vehicle Product Selection Grid - for physical products like bikes */
.vehicle-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

.vehicle-card {
  background: var(--bg-secondary);
  border: 2px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 12px;
  cursor: pointer;
  transition: all 0.25s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  overflow: hidden;
}

.vehicle-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--accent-soft) 0%, transparent 60%);
  opacity: 0;
  transition: opacity 0.25s ease;
}

.vehicle-card:hover {
  border-color: var(--accent);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px -6px var(--accent-glow);
}

.vehicle-card:hover::before {
  opacity: 1;
}

.vehicle-card.selected {
  border-color: var(--accent);
  background: var(--accent-soft);
}

.vehicle-card.selected::before {
  opacity: 1;
}

.vehicle-card-check {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: var(--bg-tertiary);
  border: 2px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  z-index: 2;
}

.vehicle-card.selected .vehicle-card-check {
  background: var(--accent);
  border-color: var(--accent);
}

.vehicle-card-check svg {
  width: 12px;
  height: 12px;
  color: var(--text-muted);
  opacity: 0;
  transform: scale(0);
  transition: all 0.2s ease;
}

.vehicle-card.selected .vehicle-card-check svg {
  color: var(--logo-icon-text);
  opacity: 1;
  transform: scale(1);
}

.vehicle-image-wrapper {
  width: 100%;
  height: 90px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  z-index: 1;
  margin-bottom: 8px;
}

.vehicle-image {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15));
}

.vehicle-image-placeholder {
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  border: 1px dashed var(--border);
}

.vehicle-image-placeholder svg {
  width: 32px;
  height: 32px;
  color: var(--text-muted);
}

.vehicle-info {
  text-align: center;
  position: relative;
  z-index: 1;
  width: 100%;
}

.vehicle-name {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 2px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.3;
}

.vehicle-type {
  font-size: 9px;
  color: var(--text-muted);
  margin-bottom: 6px;
  font-family: 'DM Mono', monospace;
}

.vehicle-price {
  font-family: 'DM Mono', monospace;
  font-size: 13px;
  font-weight: 600;
  color: var(--accent);
  background: var(--bg-tertiary);
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  display: inline-block;
}

/* Vehicle grid skeleton loading states */
.vehicle-card.skeleton {
  pointer-events: none;
}

.vehicle-card.skeleton .skeleton-image {
  width: 80px;
  height: 60px;
  background: linear-gradient(90deg, var(--border) 25%, var(--bg-tertiary) 50%, var(--border) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: var(--radius-md);
  margin-bottom: 8px;
}

.vehicle-card.skeleton .skeleton-info {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.vehicle-card.skeleton .skeleton-name {
  width: 70%;
  height: 12px;
  background: linear-gradient(90deg, var(--border) 25%, var(--bg-tertiary) 50%, var(--border) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
}

.vehicle-card.skeleton .skeleton-type {
  width: 50%;
  height: 10px;
  background: linear-gradient(90deg, var(--border) 25%, var(--bg-tertiary) 50%, var(--border) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
}

.vehicle-card.skeleton .skeleton-price {
  width: 60%;
  height: 20px;
  background: linear-gradient(90deg, var(--border) 25%, var(--bg-tertiary) 50%, var(--border) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: var(--radius-sm);
  margin-top: 6px;
}

/* Customer Preview Card */
.preview-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 12px;
  margin-bottom: 12px;
}

.preview-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border-subtle);
}

.preview-avatar {
  width: 36px;
  height: 36px;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  font-weight: 600;
  color: white;
  flex-shrink: 0;
}

.preview-name {
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 1px;
}

.preview-phone {
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  color: var(--text-muted);
}

.preview-badge {
  margin-left: auto;
  padding: 3px 8px;
  background: var(--info-soft);
  color: var(--info);
  border-radius: 10px;
  font-size: 9px;
  font-weight: 500;
}

.preview-details {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
}

.detail-item {
  padding: 8px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
}

.detail-label {
  font-size: 9px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.04em;
  margin-bottom: 2px;
}

.detail-value {
  font-size: 11px;
  font-weight: 500;
  color: var(--text-primary);
}

/* Checkout Summary */
.checkout-summary {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 12px;
  margin-bottom: 12px;
}

.receipt-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 8px;
  border-bottom: 1px dashed var(--border);
  margin-bottom: 6px;
}

.receipt-title {
  font-size: 11px;
  font-weight: 500;
}

.receipt-id {
  font-family: 'DM Mono', monospace;
  font-size: 9px;
  color: var(--text-muted);
}

.checkout-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 0;
  border-bottom: 1px solid var(--border-subtle);
}

.checkout-item:last-of-type {
  border-bottom: none;
}

.checkout-item-label {
  font-size: 11px;
  color: var(--text-secondary);
}

.checkout-item-value {
  font-size: 11px;
  font-weight: 500;
}

.checkout-total {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: var(--success-soft);
  border-radius: var(--radius-md);
  margin-top: 8px;
}

.checkout-total-label {
  font-weight: 500;
  font-size: 12px;
  color: var(--success);
}

.checkout-total-value {
  font-family: 'DM Mono', monospace;
  font-size: 18px;
  font-weight: 600;
  color: var(--success);
}

/* Success Screen */
.success-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding-top: 20px;
}

.success-icon {
  width: 64px;
  height: 64px;
  background: var(--success-soft);
  border: 2px solid var(--success);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 16px;
  animation: successPop 0.4s ease-out;
}

.success-icon svg {
  width: 32px;
  height: 32px;
  color: var(--success);
}

@keyframes successPop {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.success-title {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 4px;
}

.success-message {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 20px;
}

/* Form Input Error State */
.form-input-error {
  border-color: var(--error) !important;
}

.form-input-error:focus {
  box-shadow: 0 0 0 2px var(--error-soft) !important;
}

.form-input-disabled {
  background: var(--bg-tertiary) !important;
  color: var(--text-secondary) !important;
  cursor: not-allowed !important;
  opacity: 0.8;
}

.form-input-disabled:focus {
  border-color: var(--border) !important;
  box-shadow: none !important;
}

.form-hint {
  display: block;
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 4px;
  font-style: italic;
}

/* Back to Roles Button */
.back-to-roles {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 16px;
  margin-bottom: 4px;
  cursor: pointer;
  color: var(--text-muted);
  font-size: 12px;
  transition: color 0.2s ease;
  position: relative;
  z-index: 10;
}

.back-to-roles:hover {
  color: var(--accent);
}

.back-to-roles svg {
  width: 14px;
  height: 14px;
}

/* Small screen adjustments for Sales Flow */
@media (max-height: 700px) {
  .sales-bg-gradient {
    height: 200px;
  }
  
  .product-card {
    padding: 8px 10px;
    min-height: 60px;
    height: 60px;
  }
  
  .preview-card {
    padding: 10px;
  }
  
  .preview-avatar {
    width: 32px;
    height: 32px;
    font-size: 12px;
  }
  
  .success-icon {
    width: 56px;
    height: 56px;
  }
  
  .success-icon svg {
    width: 28px;
    height: 28px;
  }
  
  .success-title {
    font-size: 16px;
  }
  
  .checkout-total-value {
    font-size: 16px;
  }
}

/* ===================== */
/* FLOW HEADER COMPONENT */
/* ===================== */
/* 
 * Layout Strategy: Logo anchored on LEFT, actions on RIGHT
 * This follows standard mobile app conventions where brand 
 * identity is always in a consistent position.
 */

.flow-header {
  position: relative;
  z-index: 20;
  padding: 12px 16px;
  flex-shrink: 0;
}

.flow-header-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  max-width: 430px;
  margin: 0 auto;
}

/* Left side group: back button + logo */
.flow-header-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Right side group: language switcher and other actions */
.flow-header-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.flow-header-back {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.flow-header-back:hover {
  background: var(--bg-tertiary);
  color: var(--accent);
  border-color: var(--accent);
}

.flow-header-back svg {
  width: 16px;
  height: 16px;
}

/* Deprecated - no longer needed with left-aligned logo */
.flow-header-spacer {
  display: none;
}

.flow-header-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  flex: 1;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.flow-header-lang {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 6px 10px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-family: 'Outfit', sans-serif;
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.flow-header-lang:hover {
  background: var(--bg-tertiary);
  color: var(--accent);
  border-color: var(--accent);
}

.flow-header-lang svg {
  width: 14px;
  height: 14px;
}

.flow-header-lang-label {
  min-width: 18px;
  text-align: center;
}

/* History button styling in header */
.flow-header-history {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.flow-header-history:hover {
  background: var(--accent-soft);
  color: var(--accent);
  border-color: var(--accent);
}

.flow-header-history:active {
  transform: scale(0.95);
}

.flow-header-history svg {
  width: 16px;
  height: 16px;
}

/* Logout button styling in header */
.flow-header-logout {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.flow-header-logout:hover {
  background: rgba(255, 90, 90, 0.15);
  color: #ff5a5a;
  border-color: #ff5a5a;
}

.flow-header-logout:active {
  transform: scale(0.95);
}

.flow-header-logout svg {
  width: 16px;
  height: 16px;
}

/* Logo styling in header */
.flow-header-logo {
  display: flex;
  align-items: center;
  height: 28px;
}

.flow-header-logo img {
  height: 24px;
  width: auto;
  object-fit: contain;
}

@media (max-height: 700px) {
  .flow-header {
    padding: 8px 12px;
  }
  
  .flow-header-back {
    width: 28px;
    height: 28px;
  }
  
  .flow-header-back svg {
    width: 14px;
    height: 14px;
  }
  
  .flow-header-lang {
    padding: 5px 8px;
    font-size: 10px;
  }
  
  .flow-header-history {
    width: 28px;
    height: 28px;
  }
  
  .flow-header-history svg {
    width: 14px;
    height: 14px;
  }
  
  .flow-header-logout {
    width: 28px;
    height: 28px;
  }
  
  .flow-header-logout svg {
    width: 14px;
    height: 14px;
  }
  
  .flow-header-title {
    font-size: 13px;
  }
  
  .flow-header-logo img {
    height: 20px;
  }
}

/* ===================== */
/* EMPTY PLANS STATE     */
/* ===================== */

.empty-plans-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 32px 24px;
  min-height: 320px;
}

/* Illustration container */
.empty-plans-illustration {
  position: relative;
  margin-bottom: 24px;
}

.empty-plans-icon-wrapper {
  position: relative;
  width: 88px;
  height: 88px;
  background: linear-gradient(145deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
  border: 2px solid var(--border);
  border-radius: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 
    0 8px 32px -8px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  animation: iconFloat 3s ease-in-out infinite;
}

@keyframes iconFloat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

.empty-plans-icon {
  width: 40px;
  height: 40px;
  color: var(--text-muted);
  opacity: 0.6;
}

/* Error badge on the icon */
.empty-plans-badge {
  position: absolute;
  bottom: -6px;
  right: -6px;
  width: 28px;
  height: 28px;
  background: linear-gradient(145deg, #ff6b6b 0%, #ee5a5a 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 3px solid var(--bg-primary);
  box-shadow: 0 4px 12px -2px rgba(238, 90, 90, 0.4);
}

.empty-plans-badge svg {
  width: 12px;
  height: 12px;
  color: white;
}

/* Floating particles */
.empty-plans-particles {
  position: absolute;
  inset: -20px;
  pointer-events: none;
}

.empty-plans-particles .particle {
  position: absolute;
  width: 6px;
  height: 6px;
  background: var(--accent);
  border-radius: 50%;
  opacity: 0;
  animation: particleDrift 4s ease-in-out infinite;
}

.empty-plans-particles .particle:nth-child(1) {
  top: 10%;
  left: 15%;
  animation-delay: 0s;
}

.empty-plans-particles .particle:nth-child(2) {
  top: 20%;
  right: 10%;
  animation-delay: 1.3s;
  width: 4px;
  height: 4px;
}

.empty-plans-particles .particle:nth-child(3) {
  bottom: 15%;
  left: 20%;
  animation-delay: 2.6s;
  width: 5px;
  height: 5px;
}

@keyframes particleDrift {
  0%, 100% { 
    opacity: 0;
    transform: translateY(0) scale(0.5);
  }
  20% { 
    opacity: 0.6;
    transform: translateY(-8px) scale(1);
  }
  80% { 
    opacity: 0.4;
    transform: translateY(-16px) scale(0.8);
  }
}

/* Content */
.empty-plans-content {
  margin-bottom: 24px;
  max-width: 280px;
}

.empty-plans-title {
  font-size: 18px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 8px;
  letter-spacing: -0.02em;
}

.empty-plans-description {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
}

/* Retry button */
.empty-plans-retry-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 14px 28px;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
  color: var(--bg-primary);
  border: none;
  border-radius: var(--radius-md);
  font-family: 'Outfit', sans-serif;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s ease;
  position: relative;
  overflow: hidden;
}

.empty-plans-retry-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.15) 100%);
  opacity: 0;
  transition: opacity 0.25s ease;
}

.empty-plans-retry-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px -6px var(--accent-glow);
}

.empty-plans-retry-btn:hover::before {
  opacity: 1;
}

.empty-plans-retry-btn:active {
  transform: translateY(0);
}

.empty-plans-retry-btn svg {
  width: 18px;
  height: 18px;
  transition: transform 0.3s ease;
}

.empty-plans-retry-btn:hover svg {
  animation: rotateRefresh 0.6s ease-in-out;
}

@keyframes rotateRefresh {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Hint text */
.empty-plans-hint {
  margin-top: 20px;
  font-size: 11px;
  color: var(--text-muted);
  font-style: italic;
}

/* Responsive adjustments */
@media (max-height: 650px) {
  .empty-plans-state {
    padding: 20px 16px;
    min-height: 260px;
  }
  
  .empty-plans-icon-wrapper {
    width: 72px;
    height: 72px;
    border-radius: 18px;
  }
  
  .empty-plans-icon {
    width: 32px;
    height: 32px;
  }
  
  .empty-plans-badge {
    width: 24px;
    height: 24px;
    bottom: -4px;
    right: -4px;
  }
  
  .empty-plans-badge svg {
    width: 10px;
    height: 10px;
  }
  
  .empty-plans-illustration {
    margin-bottom: 18px;
  }
  
  .empty-plans-title {
    font-size: 16px;
  }
  
  .empty-plans-description {
    font-size: 12px;
  }
  
  .empty-plans-retry-btn {
    padding: 12px 24px;
    font-size: 13px;
  }
  
  .empty-plans-hint {
    margin-top: 14px;
    font-size: 10px;
  }
}

/* ===================== */
/* PLANS ERROR STATE     */
/* ===================== */

.plans-error-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 32px 24px;
  min-height: 320px;
}

/* Error illustration container */
.plans-error-illustration {
  position: relative;
  margin-bottom: 28px;
}

.plans-error-icon-wrapper {
  position: relative;
  width: 96px;
  height: 96px;
  background: linear-gradient(145deg, rgba(239, 68, 68, 0.15) 0%, rgba(185, 28, 28, 0.1) 100%);
  border: 2px solid rgba(239, 68, 68, 0.3);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 
    0 8px 32px -8px rgba(239, 68, 68, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.plans-error-icon {
  width: 44px;
  height: 44px;
  color: #ef4444;
  animation: errorShake 0.5s ease-in-out;
}

@keyframes errorShake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-3px); }
  40% { transform: translateX(3px); }
  60% { transform: translateX(-2px); }
  80% { transform: translateX(2px); }
}

/* Pulsing ring effect */
.plans-error-ring {
  position: absolute;
  inset: -4px;
  border: 2px solid rgba(239, 68, 68, 0.3);
  border-radius: 50%;
  animation: errorPulse 2s ease-out infinite;
}

.plans-error-ring-delay {
  animation-delay: 1s;
}

@keyframes errorPulse {
  0% {
    transform: scale(1);
    opacity: 0.5;
  }
  100% {
    transform: scale(1.4);
    opacity: 0;
  }
}

/* Connection error lines - visual effect */
.plans-error-lines {
  position: absolute;
  inset: -28px;
  pointer-events: none;
}

.plans-error-lines .error-line {
  position: absolute;
  height: 3px;
  background: linear-gradient(90deg, transparent 0%, rgba(239, 68, 68, 0.4) 50%, transparent 100%);
  border-radius: 2px;
  animation: errorLinePulse 2.5s ease-in-out infinite;
}

.plans-error-lines .error-line:nth-child(1) {
  width: 28px;
  top: 50%;
  left: -36px;
  transform: translateY(-50%);
  animation-delay: 0s;
}

.plans-error-lines .error-line:nth-child(2) {
  width: 28px;
  top: 50%;
  right: -36px;
  transform: translateY(-50%);
  animation-delay: 0.3s;
}

.plans-error-lines .error-line:nth-child(3) {
  width: 24px;
  height: 3px;
  bottom: -28px;
  left: 50%;
  transform: translateX(-50%) rotate(90deg);
  animation-delay: 0.6s;
}

@keyframes errorLinePulse {
  0%, 100% { opacity: 0.2; }
  50% { opacity: 0.6; }
}

/* Content */
.plans-error-content {
  margin-bottom: 24px;
  max-width: 280px;
}

.plans-error-title {
  font-size: 18px;
  font-weight: 700;
  color: #ef4444;
  margin-bottom: 10px;
  letter-spacing: -0.02em;
}

.plans-error-description {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.6;
}

/* Retry button - styled differently for error state */
.plans-error-retry-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 14px 32px;
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-family: 'Outfit', sans-serif;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s ease;
  position: relative;
  overflow: hidden;
  box-shadow: 0 4px 16px -4px rgba(239, 68, 68, 0.4);
}

.plans-error-retry-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.15) 100%);
  opacity: 0;
  transition: opacity 0.25s ease;
}

.plans-error-retry-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px -6px rgba(239, 68, 68, 0.5);
}

.plans-error-retry-btn:hover::before {
  opacity: 1;
}

.plans-error-retry-btn:active {
  transform: translateY(0);
}

.plans-error-retry-btn svg {
  width: 18px;
  height: 18px;
  transition: transform 0.3s ease;
}

.plans-error-retry-btn:hover svg {
  animation: rotateRefresh 0.6s ease-in-out;
}

/* Hint text */
.plans-error-hint {
  margin-top: 20px;
  font-size: 11px;
  color: var(--text-muted);
  font-style: italic;
}

/* Responsive adjustments */
@media (max-height: 650px) {
  .plans-error-state {
    padding: 20px 16px;
    min-height: 260px;
  }
  
  .plans-error-icon-wrapper {
    width: 76px;
    height: 76px;
  }
  
  .plans-error-icon {
    width: 36px;
    height: 36px;
  }
  
  .plans-error-illustration {
    margin-bottom: 20px;
  }
  
  .plans-error-title {
    font-size: 16px;
  }
  
  .plans-error-description {
    font-size: 12px;
  }
  
  .plans-error-retry-btn {
    padding: 12px 24px;
    font-size: 13px;
  }
  
  .plans-error-hint {
    margin-top: 14px;
    font-size: 10px;
  }
  
  .plans-error-lines .error-line:nth-child(1),
  .plans-error-lines .error-line:nth-child(2) {
    width: 20px;
  }
  
  .plans-error-lines .error-line:nth-child(3) {
    width: 18px;
  }
}

/* ===================== */
/* RIDER MODULE          */
/* ===================== */

/* Rider Container */
.rider-container {
  position: fixed;
  inset: 0;
  background: var(--bg-primary);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: 100;
}

.rider-bg-gradient {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 300px;
  background: radial-gradient(ellipse 80% 50% at 50% -20%, var(--accent-soft) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
}

/* Rider Main Content */
.rider-main {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0 16px 90px;
  position: relative;
  z-index: 5;
  max-width: 430px;
  margin: 0 auto;
  width: 100%;
}

.rider-main.no-padding-bottom {
  padding-bottom: 16px;
}

/* Rider screen animations */
.rider-screen {
  display: none;
  animation: fadeSlideIn 0.4s ease-out;
}

.rider-screen.active {
  display: block;
}

/* =====================================================
   SHARED BOTTOM NAVIGATION - Base Styles
   Used by Rider, Attendant, and Sales apps
   ===================================================== */

.bottom-nav {
  display: flex;
  align-items: center;
  justify-content: space-around;
  padding: 10px 20px 20px;
  background: var(--bg-secondary);
  border-top: 1px solid var(--border);
  position: relative;
  z-index: 10;
  flex-shrink: 0;
}

@media (max-height: 700px) {
  .bottom-nav {
    padding: 8px 16px 12px;
  }
}

.bottom-nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 8px 12px;
  background: transparent;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  color: var(--text-muted);
  font-family: 'Outfit', sans-serif;
}

.bottom-nav-item:hover {
  color: var(--text-secondary);
}

.bottom-nav-item.active {
  color: var(--accent);
}

.bottom-nav-icon {
  display: flex;
  align-items: center;
  justify-content: center;
}

.bottom-nav-icon svg {
  width: 22px;
  height: 22px;
  transition: all 0.2s ease;
}

.bottom-nav-item.active .bottom-nav-icon svg {
  transform: scale(1.1);
}

.bottom-nav-label {
  font-size: 10px;
  font-weight: 500;
}

/* =====================================================
   APP-SPECIFIC OVERRIDES
   ===================================================== */

/* Rider Nav - inherits from .bottom-nav, no additional overrides needed */
.rider-nav {
  /* Uses base .bottom-nav styles */
}

/* Rider Dashboard Header */
.rider-dashboard-header {
  margin-bottom: 16px;
  padding-top: 8px;
}

.rider-greeting {
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 2px;
}

.rider-name {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-primary);
  letter-spacing: -0.02em;
}

/* Rider Bike Card - Shows rider's vehicle */
.rider-bike-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 14px;
  margin-bottom: 12px;
  position: relative;
  overflow: hidden;
}

.rider-bike-card::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 150px;
  height: 150px;
  background: radial-gradient(circle at top right, var(--accent-soft) 0%, transparent 70%);
  pointer-events: none;
}

.rider-bike-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
  position: relative;
  z-index: 1;
}

.rider-bike-label {
  font-size: 10px;
  font-weight: 500;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 2px;
}

.rider-bike-model {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
}

.rider-bike-status {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.rider-bike-status.active {
  background: var(--success-soft);
  color: var(--success);
}

.rider-bike-status.warning {
  background: rgba(245, 158, 11, 0.15);
  color: #f59e0b;
}

.rider-bike-status.inactive {
  background: var(--error-soft);
  color: var(--error);
}

.rider-bike-status.pending {
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.rider-bike-content {
  display: flex;
  gap: 14px;
  align-items: center;
  position: relative;
  z-index: 1;
}

.rider-bike-image {
  width: 140px;
  height: 100px;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.rider-bike-image img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.rider-bike-info {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1;
}

.rider-bike-detail {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.rider-bike-detail-label {
  font-size: 9px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.rider-bike-detail-value {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
  font-family: 'DM Mono', monospace;
  text-align: right;
}

/* Account Balance Card */
.account-balance-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 16px 18px;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.account-balance-info {
  display: flex;
  align-items: center;
  gap: 14px;
}

.account-balance-icon {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-md);
  background: var(--accent-soft);
}

.account-balance-icon svg {
  width: 20px;
  height: 20px;
  color: var(--accent);
}

.account-balance-label {
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 2px;
  text-transform: capitalize;
}

.account-balance-value {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-primary);
  font-family: 'DM Mono', monospace;
}

.account-balance-action {
  padding: 10px 20px;
  background: var(--accent);
  border: none;
  border-radius: var(--radius-md);
  color: #000;
  font-family: 'Outfit', sans-serif;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.account-balance-action:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

/* Quick Actions */
.quick-actions {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  margin-bottom: 20px;
}

.quick-action {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 16px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s ease;
}

.quick-action:hover {
  border-color: var(--accent);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px -4px var(--accent-glow);
}

.quick-action-icon {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background: var(--accent-soft);
}

.quick-action-icon svg {
  width: 22px;
  height: 22px;
  color: var(--accent);
}

.quick-action-label {
  font-size: 11px;
  font-weight: 500;
  color: var(--text-primary);
}

/* Rider Section Header */
.rider-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.rider-section-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.rider-section-link {
  font-size: 11px;
  font-weight: 500;
  color: var(--accent);
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.rider-section-link:hover {
  opacity: 0.8;
}

/* Stations Map Container */
.stations-map-container {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.stations-map {
  height: 120px;
  position: relative;
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border);
}

.map-visual {
  position: relative;
  width: 100%;
  height: 100%;
  background: 
    linear-gradient(var(--border-subtle) 1px, transparent 1px),
    linear-gradient(90deg, var(--border-subtle) 1px, transparent 1px);
  background-size: 30px 30px;
}

.map-grid {
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(circle at 50% 50%, var(--accent-soft) 0%, transparent 50%);
  pointer-events: none;
}

/* User location marker */
.map-user-pulse {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 40px;
  height: 40px;
  background: var(--accent-soft);
  border-radius: 50%;
  animation: userPulse 2s ease-out infinite;
}

@keyframes userPulse {
  0% { transform: translate(-50%, -50%) scale(0.8); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
}

.map-user-marker {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 14px;
  height: 14px;
  background: var(--accent);
  border: 3px solid white;
  border-radius: 50%;
  box-shadow: 0 2px 8px var(--accent-glow);
  z-index: 2;
}

/* Station pins on map */
.map-station-pin {
  position: absolute;
  transform: translate(-50%, -50%);
  cursor: pointer;
  z-index: 1;
}

.map-station-icon {
  width: 28px;
  height: 28px;
  transform: rotate(-45deg);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: rgba(0, 217, 160, 0.4) 0px 2px 8px;
  background: var(--success);
  border-radius: 50% 50% 50% 0px;
  transition: all 0.2s ease;
}

.map-station-icon svg {
  width: 14px;
  height: 14px;
  color: white;
  transform: rotate(45deg);
}

.map-station-pin:hover .map-station-icon {
  transform: rotate(-45deg) scale(1.15);
}

/* Leaflet custom marker styles */
.leaflet-station-marker {
  width: 28px;
  height: 28px;
  transform: rotate(-45deg);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: rgba(0, 217, 160, 0.4) 0px 2px 8px;
  background: var(--success);
  border-radius: 50% 50% 50% 0px;
}

.leaflet-station-marker svg {
  width: 14px;
  height: 14px;
  color: white;
  transform: rotate(45deg);
}

/* User location marker - cyan teardrop */
.leaflet-user-marker {
  width: 28px;
  height: 28px;
  transform: rotate(-45deg);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: rgba(0, 229, 229, 0.4) 0px 2px 8px;
  background: var(--accent);
  border-radius: 50% 50% 50% 0px;
}

.leaflet-user-marker svg {
  width: 14px;
  height: 14px;
  color: white;
  transform: rotate(45deg);
}

.map-station-label {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-top: 4px;
  font-size: 8px;
  font-weight: 500;
  color: var(--text-secondary);
  white-space: nowrap;
  background: var(--bg-primary);
  padding: 2px 6px;
  border-radius: 4px;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.map-station-pin:hover .map-station-label {
  opacity: 1;
}

/* Stations List */
.stations-list {
  padding: 8px;
}

.station-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background 0.2s ease;
}

.station-item:hover {
  background: var(--bg-tertiary);
}

.station-icon {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  border-radius: var(--radius-md);
  background: var(--success-soft);
}

.station-icon svg {
  width: 18px;
  height: 18px;
  color: var(--success);
}

.station-info {
  flex: 1;
  min-width: 0;
}

.station-name {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.station-details {
  display: flex;
  align-items: center;
  gap: 16px;
}

/* Distance info - matching abs-design.vercel.app */
.station-distance-info {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
}

.station-distance-info svg {
  width: 12px;
  height: 12px;
  flex-shrink: 0;
}

.station-distance {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  color: var(--text-muted);
}

.station-distance svg {
  width: 12px;
  height: 12px;
}

/* Batteries availability - matching abs-design.vercel.app */
.station-availability {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
}

.station-availability svg {
  width: 12px;
  height: 12px;
  flex-shrink: 0;
}

.station-availability-dot {
  width: 6px;
  height: 6px;
  background: var(--success);
  border-radius: 50%;
  flex-shrink: 0;
}

/* Orange for low availability (1-3 batteries) */
.station-availability-dot.low {
  background: #f59e0b;
}

/* Red for empty (0 batteries) */
.station-availability-dot.empty {
  background: #ef4444;
}

.station-nav-btn {
  width: 32px;
  height: 32px;
  background: var(--accent-soft);
  border: none;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.station-nav-btn svg {
  width: 16px;
  height: 16px;
  color: var(--accent);
}

.station-nav-btn:hover {
  background: var(--accent);
}

.station-nav-btn:hover svg {
  color: white;
}

/* Full Map Container */
.full-map-container {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  height: calc(100vh - 250px);
  min-height: 300px;
  position: relative;
}

.full-map-container .map-visual {
  height: 100%;
}

/* Station Detail Card - old definition removed, see below for new one */

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.station-detail-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 14px;
}

.station-detail-info {
  flex: 1;
  min-width: 0;
}

.station-detail-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.station-detail-address {
  font-size: 11px;
  color: var(--text-muted);
}

.station-detail-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-bottom: 14px;
}

.station-detail-stat {
  text-align: center;
  padding: 10px 8px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
}

.station-detail-stat-value {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.station-detail-stat-label {
  font-size: 9px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.station-detail-actions {
  display: flex;
  gap: 10px;
}

/* =====================================================
   ENHANCED STATIONS PAGE
   ===================================================== */

.stations-page {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding: 0;
  overflow: hidden;
}

.stations-header {
  padding: 16px 16px 8px;
  flex-shrink: 0;
}

.stations-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-primary);
  margin: 0 0 4px;
}

.stations-subtitle {
  font-size: 13px;
  color: var(--text-muted);
  margin: 0;
}

/* Search Bar */
.stations-search {
  padding: 0 16px 12px;
  flex-shrink: 0;
}

.stations-search-input-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.stations-search-icon {
  position: absolute;
  left: 14px;
  color: var(--accent);
  pointer-events: none;
}

.stations-search-input {
  width: 100%;
  padding: 12px 40px 12px 44px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  font-size: 14px;
  color: var(--text-primary);
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.stations-search-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(0, 229, 229, 0.1);
}

.stations-search-input::placeholder {
  color: var(--text-muted);
}

.stations-search-clear {
  position: absolute;
  right: 12px;
  background: var(--bg-tertiary);
  border: none;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: var(--text-muted);
  transition: all 0.2s;
}

.stations-search-clear:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Loading & Empty States */
.stations-loading,
.stations-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  text-align: center;
  flex: 1;
}

.stations-empty svg {
  color: var(--text-muted);
  margin-bottom: 16px;
}

.stations-empty h4 {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 8px;
}

.stations-empty p,
.stations-loading p {
  font-size: 14px;
  color: var(--text-muted);
  margin: 0;
  max-width: 280px;
}

/* Content Container */
.stations-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: visible;
  padding: 0 16px 16px;
  position: relative;
  min-height: 0; /* Allow flex children to shrink */
}

/* Map Wrapper */
.stations-map-wrapper {
  position: relative;
  flex: 1;
  min-height: 200px;
  border-radius: var(--radius-lg);
  overflow: hidden;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
}

.stations-map {
  width: 100%;
  height: 100%;
  min-height: 200px;
}

/* Location Button */
.stations-location-btn {
  position: absolute;
  bottom: 90px;
  right: 12px;
  width: 44px;
  height: 44px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: var(--accent);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  transition: all 0.2s;
  z-index: 5;
}

.stations-location-btn:hover {
  background: var(--bg-secondary);
  transform: scale(1.05);
}

/* Station Detail Card (on map) */
.stations-detail-card {
  position: absolute;
  bottom: 12px;
  left: 12px;
  right: 12px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 16px;
  z-index: 10;
  animation: slideUp 0.3s ease-out;
}

.stations-detail-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 14px;
}

.stations-detail-icon {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, rgba(0, 229, 229, 0.2) 0%, rgba(0, 229, 229, 0.05) 100%);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.stations-detail-icon svg {
  width: 20px;
  height: 20px;
  color: var(--accent);
}

.stations-detail-info {
  flex: 1;
  min-width: 0;
}

.stations-detail-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.stations-detail-address {
  font-size: 12px;
  color: var(--text-muted);
  line-height: 1.4;
}

.stations-detail-close {
  background: var(--bg-tertiary);
  border: none;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: var(--text-muted);
  flex-shrink: 0;
  transition: all 0.2s;
}

.stations-detail-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.stations-detail-stats {
  display: flex;
  gap: 16px;
  margin-bottom: 14px;
  padding: 12px;
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
}

.stations-detail-stat {
  display: flex;
  align-items: center;
  gap: 8px;
}

.stations-detail-stat svg {
  color: var(--accent);
}

.stations-detail-stat-value {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.stations-detail-stat-label {
  font-size: 12px;
  color: var(--text-muted);
}

.stations-navigate-btn {
  width: 100%;
  padding: 14px;
  background: var(--accent);
  border: none;
  border-radius: var(--radius-md);
  font-size: 15px;
  font-weight: 600;
  color: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

.stations-navigate-btn:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

/* ============================================
   STATION DETAIL CARD - Redesigned
   ============================================ */

.station-detail-card {
  position: fixed;
  bottom: 80px; /* Above the bottom navigation */
  left: 16px;
  right: 16px;
  max-width: 398px;
  margin: 0 auto;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px;
  animation: slideUp 0.3s ease-out;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  z-index: 1000;
}

.station-detail-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.station-detail-icon {
  width: 36px;
  height: 36px;
  background: var(--accent);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.station-detail-icon svg {
  width: 18px;
  height: 18px;
  color: #000;
}

.station-detail-info {
  flex: 1;
  min-width: 0;
}

.station-detail-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.station-detail-address {
  font-size: 12px;
  color: var(--accent);
  opacity: 0.9;
}

/* Stats Row */
.station-detail-stats {
  display: flex;
  gap: 8px;
  margin-bottom: 10px;
}

.station-detail-stat {
  flex: 1;
  background: var(--bg-secondary);
  border-radius: 10px;
  padding: 8px 6px;
  text-align: center;
}

.station-detail-stat-value {
  display: block;
  font-size: 16px;
  font-weight: 700;
  color: var(--text-primary);
  font-family: 'DM Mono', monospace;
  margin-bottom: 2px;
}

.station-detail-stat-label {
  font-size: 11px;
  color: var(--text-muted);
  text-transform: capitalize;
}

/* Action Buttons */
.station-detail-actions {
  display: flex;
  gap: 10px;
}

.station-detail-btn {
  flex: 1;
  padding: 10px 12px;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  cursor: pointer;
  transition: all 0.2s;
}

.station-detail-btn.secondary {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  color: var(--text-primary);
}

.station-detail-btn.secondary:hover {
  background: var(--bg-tertiary);
}

.station-detail-btn.primary {
  background: var(--accent);
  border: none;
  color: #000;
}

.station-detail-btn.primary:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

/* List Toggle */
.stations-list-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  margin-top: 12px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.stations-list-toggle:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

/* Station List Container */
.stations-list-container {
  margin-top: 12px;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  /* Fixed height to show header + ~3 items */
  height: 280px;
}

.stations-list-container .stations-list {
  flex: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

.stations-list-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.stations-list-count {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
}

.stations-list-sort {
  font-size: 11px;
  color: var(--text-muted);
}

/* Sort Button */
.stations-sort-button {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
  cursor: pointer;
  transition: all 0.2s;
}

.stations-sort-button:hover {
  background: var(--bg-hover);
  border-color: var(--accent);
}

.stations-sort-button svg:first-child {
  color: var(--accent);
}

.stations-sort-button svg:last-child {
  color: var(--text-muted);
}

/* Sort Picker Modal */
.sort-picker-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: flex-end;
  justify-content: center;
  z-index: 10000;
  animation: fadeIn 0.2s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.sort-picker-modal {
  width: 100%;
  max-width: 480px;
  background: var(--bg-primary);
  border-radius: var(--radius-xl) var(--radius-xl) 0 0;
  padding: 0;
  animation: slideUpModal 0.3s ease-out;
  max-height: 80vh;
  overflow: hidden;
}

@keyframes slideUpModal {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.sort-picker-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 18px 20px;
  border-bottom: 1px solid var(--border);
}

.sort-picker-header h3 {
  font-size: 17px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.sort-picker-close {
  width: 36px;
  height: 36px;
  background: var(--bg-tertiary);
  border: none;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: var(--text-muted);
  transition: all 0.2s;
}

.sort-picker-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.sort-picker-options {
  padding: 12px;
}

.sort-picker-option {
  display: flex;
  align-items: center;
  gap: 14px;
  width: 100%;
  padding: 14px 16px;
  background: transparent;
  border: 1px solid transparent;
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
}

.sort-picker-option:hover {
  background: var(--bg-secondary);
}

.sort-picker-option.selected {
  background: rgba(0, 229, 229, 0.08);
  border-color: var(--accent);
}

.sort-picker-option-icon {
  width: 44px;
  height: 44px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  color: var(--accent);
}

.sort-picker-option.selected .sort-picker-option-icon {
  background: var(--accent);
  color: #000;
}

.sort-picker-option-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.sort-picker-option-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
}

.sort-picker-option-desc {
  font-size: 12px;
  color: var(--text-muted);
}

.sort-picker-option-check {
  color: var(--accent);
  flex-shrink: 0;
}

/* Scroll Indicator */
.stations-scroll-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px;
  background: linear-gradient(to bottom, transparent, var(--bg-secondary));
  color: var(--accent);
  font-size: 11px;
  font-weight: 500;
  border-top: 1px solid var(--border-subtle);
  animation: bounceDown 1.5s ease-in-out infinite;
}

@keyframes bounceDown {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(3px); }
}

.stations-list-container .stations-list {
  padding: 0;
  overflow-y: auto;
  flex: 1;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
  scrollbar-color: var(--accent) transparent;
}

.stations-list-container .stations-list::-webkit-scrollbar {
  width: 4px;
}

.stations-list-container .stations-list::-webkit-scrollbar-track {
  background: transparent;
}

.stations-list-container .stations-list::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: 2px;
}

.stations-list-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  border-bottom: 1px solid var(--border-subtle);
  cursor: pointer;
  transition: background 0.15s;
  min-height: 64px; /* Consistent height for ~3 items visible in 220px */
  box-sizing: border-box;
}

.stations-list-item:last-child {
  border-bottom: none;
}

.stations-list-item:hover {
  background: var(--bg-tertiary);
}

.stations-list-item.selected {
  background: rgba(0, 229, 229, 0.08);
  border-left: 3px solid var(--accent);
  padding-left: 11px;
}

.stations-list-item-icon {
  width: 36px;
  height: 36px;
  background: linear-gradient(135deg, rgba(0, 229, 229, 0.15) 0%, rgba(0, 229, 229, 0.05) 100%);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.stations-list-item-icon svg {
  width: 18px;
  height: 18px;
  color: var(--accent);
}

.stations-list-item-content {
  flex: 1;
  min-width: 0;
}

.stations-list-item-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.stations-list-item-details {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 12px;
  color: var(--text-muted);
}

.stations-list-item-distance {
  display: flex;
  align-items: center;
  gap: 4px;
}

.stations-list-item-batteries {
  display: flex;
  align-items: center;
  gap: 4px;
}

.stations-list-item-batteries-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--success);
}

.stations-list-item-batteries.low .stations-list-item-batteries-dot {
  background: #f59e0b;
}

.stations-list-item-batteries.empty .stations-list-item-batteries-dot {
  background: var(--color-error);
}

.stations-list-item-nav {
  width: 36px;
  height: 36px;
  background: var(--accent);
  border: none;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #000;
  flex-shrink: 0;
  transition: all 0.2s;
}

.stations-list-item-nav:hover {
  transform: scale(1.08);
  box-shadow: 0 2px 8px rgba(0, 229, 229, 0.3);
}

/* ============================================
   BOTTOM SHEET - Draggable Station List
   ============================================ */

.bottom-sheet {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--bg-secondary);
  border-radius: 20px 20px 0 0;
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
  z-index: 100;
  transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.bottom-sheet.dragging {
  transition: none;
}

/* Drag Handle */
.bottom-sheet-handle {
  padding: 12px 16px 8px;
  cursor: grab;
  user-select: none;
  touch-action: none;
  flex-shrink: 0;
}

.bottom-sheet-handle:active {
  cursor: grabbing;
}

.bottom-sheet-handle-bar {
  width: 40px;
  height: 4px;
  background: var(--text-muted);
  border-radius: 2px;
  margin: 0 auto 10px;
  opacity: 0.5;
}

.bottom-sheet-handle-info {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.bottom-sheet-count {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
}

.bottom-sheet-hint {
  color: var(--text-muted);
  animation: bounce-up 1s infinite;
}

@keyframes bounce-up {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

/* Sheet Content */
.bottom-sheet-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  padding: 0 16px 16px;
}

.bottom-sheet-header {
  display: flex;
  justify-content: flex-end;
  padding-bottom: 12px;
  flex-shrink: 0;
}

/* Scrollable List */
.bottom-sheet-list {
  flex: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  border-radius: var(--radius-md);
  background: var(--bg-tertiary);
}

.bottom-sheet-list::-webkit-scrollbar {
  width: 4px;
}

.bottom-sheet-list::-webkit-scrollbar-track {
  background: transparent;
}

.bottom-sheet-list::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: 2px;
}

/* Override stations-list-item styles for bottom sheet */
.bottom-sheet-list .stations-list-item {
  background: transparent;
}

.bottom-sheet-list .stations-list-item:first-child {
  border-radius: var(--radius-md) var(--radius-md) 0 0;
}

.bottom-sheet-list .stations-list-item:last-child {
  border-radius: 0 0 var(--radius-md) var(--radius-md);
  border-bottom: none;
}

/* Collapsed state hint */
.bottom-sheet.collapsed .bottom-sheet-handle-info {
  justify-content: center;
  gap: 8px;
}

/* Activity Filters */
.activity-filters {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  overflow-x: auto;
  padding-bottom: 4px;
}

.activity-filter {
  padding: 8px 14px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: 20px;
  font-family: 'Outfit', sans-serif;
  font-size: 11px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.activity-filter:hover {
  border-color: var(--accent);
  color: var(--accent);
}

.activity-filter.active {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--bg-primary);
}

/* Activity List */
.activity-list {
  background: transparent;
  border: none;
  border-radius: 0;
  overflow: visible;
  display: flex;
  flex-direction: column;
  gap: 0;
}

.activity-date-header {
  padding: 12px 4px 8px;
  background: transparent;
  font-size: 11px;
  font-weight: 600;
  color: var(--accent);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-bottom: none;
}

.activity-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  margin-bottom: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.activity-item:last-child {
  margin-bottom: 0;
}

.activity-item:hover {
  background: var(--bg-tertiary);
}

.activity-item:active,
.activity-item.selected {
  border-color: var(--accent);
  box-shadow: 0 0 8px var(--accent-glow);
}

.activity-item-icon {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  border-radius: var(--radius-md);
  background: var(--accent-soft);
}

.activity-item-icon svg {
  width: 20px;
  height: 20px;
  color: var(--accent);
}

.activity-item-icon.swap {
  background: var(--accent-soft);
  color: var(--accent);
}

.activity-item-icon.topup {
  background: var(--accent-soft);
  color: var(--accent);
}

.activity-item-icon.payment {
  background: var(--accent-soft);
  color: var(--accent);
}

.activity-item-content {
  flex: 1;
  min-width: 0;
}

.activity-item-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.activity-item-subtitle {
  font-size: 10px;
  color: var(--text-muted);
}

.activity-item-meta {
  text-align: right;
  flex-shrink: 0;
}

.activity-item-amount {
  font-size: 12px;
  font-weight: 600;
  font-family: 'DM Mono', monospace;
  margin-bottom: 2px;
}

.activity-item-amount.positive {
  color: var(--success);
}

.activity-item-amount.negative {
  color: var(--text-primary);
}

.activity-item-time {
  font-size: 10px;
  color: var(--text-muted);
}

/* Profile Screen */

/* Centered Profile Header - Avatar in middle, name and phone below */
.profile-header-centered {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 20px;
  margin-bottom: 16px;
}

.profile-avatar-large {
  width: 80px;
  height: 80px;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  font-weight: 700;
  color: white;
  margin-bottom: 12px;
}

.profile-header-centered .profile-name {
  font-size: 18px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.profile-header-centered .profile-phone {
  font-size: 13px;
  color: var(--text-muted);
  font-family: 'DM Mono', monospace;
}

/* Legacy profile header styles */
.profile-header {
  text-align: center;
  padding: 20px 0 24px;
}

.profile-avatar {
  width: 72px;
  height: 72px;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 12px;
  font-size: 24px;
  font-weight: 700;
  color: white;
}

.profile-name {
  font-size: 18px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.profile-phone {
  font-size: 12px;
  color: var(--text-muted);
  font-family: 'DM Mono', monospace;
}

/* Energy Service Card */
.energy-service-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 16px;
  margin-bottom: 16px;
  position: relative;
  overflow: hidden;
}

.energy-service-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
  position: relative;
  z-index: 1;
}

.energy-service-icon {
  width: 40px;
  height: 40px;
  background: var(--accent);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
}

.energy-service-icon svg {
  width: 20px;
  height: 20px;
  color: #000;
}

.energy-service-title {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.energy-service-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.energy-service-status {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 10px;
  font-weight: 500;
  color: var(--success);
}

.energy-service-status .status-dot {
  width: 6px;
  height: 6px;
  background: var(--success);
  border-radius: 50%;
  animation: pulse 2s ease-in-out infinite;
}

/* Payment State Colors for Energy Service */
.energy-service-status.paid {
  color: var(--success);
}

.energy-service-status.paid .status-dot {
  background: var(--success);
}

.energy-service-status.renewal-due {
  color: #f59e0b;
}

.energy-service-status.renewal-due .status-dot {
  background: #f59e0b;
  animation: pulse-warning 1.5s ease-in-out infinite;
}

.energy-service-status.overdue {
  color: var(--error);
}

.energy-service-status.overdue .status-dot {
  background: var(--error);
  animation: pulse-error 1s ease-in-out infinite;
}

.energy-service-status.pending {
  color: var(--text-muted);
}

.energy-service-status.pending .status-dot {
  background: var(--text-muted);
  animation: none;
}

@keyframes pulse-warning {
  0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4); }
  50% { opacity: 0.8; box-shadow: 0 0 0 4px rgba(245, 158, 11, 0); }
}

@keyframes pulse-error {
  0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(255, 90, 90, 0.4); }
  50% { opacity: 0.7; box-shadow: 0 0 0 4px rgba(255, 90, 90, 0); }
}

.energy-service-visual {
  position: relative;
  height: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 16px;
}

/* Shadow/glow effect below the E-Trike */
.energy-service-visual::after {
  content: '';
  position: absolute;
  width: 200px;
  height: 60px;
  bottom: 0px;
  left: 50%;
  transform: translateX(-50%);
  pointer-events: none;
  background: radial-gradient(ellipse, var(--accent-soft) 0%, transparent 70%);
}

/* E-Trike image styling */
.energy-service-visual img {
  max-height: 90px;
  max-width: 160px;
  object-fit: contain;
  position: relative;
  z-index: 1;
  filter: drop-shadow(rgba(0, 0, 0, 0.3) 0px 8px 16px);
}

.energy-service-bike {
  height: 100px;
  width: auto;
  max-width: 100%;
  object-fit: contain;
  position: relative;
  z-index: 1;
}

.energy-service-glow {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100px;
  height: 30px;
  background: radial-gradient(ellipse, var(--accent-soft) 0%, transparent 70%);
  filter: blur(10px);
}

.energy-service-stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-bottom: 16px;
}

.energy-stat-card {
  padding: 14px 16px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  display: flex;
  flex-direction: column;
  gap: 4px;
  text-align: center;
}

.energy-stat-card.primary {
  background: var(--accent-soft);
}

.energy-stat-icon {
  width: 32px;
  height: 32px;
  background: var(--bg-secondary);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.energy-stat-card.primary .energy-stat-icon {
  background: rgba(255, 255, 255, 0.15);
}

.energy-stat-icon svg {
  width: 16px;
  height: 16px;
  color: var(--accent);
}

.energy-stat-info {
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.energy-stat-value {
  font-size: 16px;
  font-weight: 700;
  color: var(--text-primary);
  font-family: 'DM Mono', monospace;
}

.energy-stat-label {
  font-size: 11px;
  color: var(--text-muted);
}

.energy-service-footer {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
  padding-top: 14px;
  border-top: 1px solid var(--border-subtle);
}

/* Vertical stacked stats - matching screenshot */
.energy-service-stats-vertical {
  display: flex;
  flex-direction: column;
  gap: 0;
  margin-bottom: 16px;
}

.energy-stat-row {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px 16px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  margin-bottom: 8px;
}

.energy-stat-row:last-child {
  margin-bottom: 0;
}

/* Highlighted stat row with accent border */
.energy-stat-row.highlighted {
  border: 1.5px solid var(--accent);
  background: rgba(0, 229, 229, 0.05);
}

.energy-stat-icon {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  background: var(--bg-secondary);
  border-radius: 10px;
}

.energy-stat-icon svg {
  width: 18px;
  height: 18px;
  color: var(--accent);
}

/* Balance stat icon - cyan background, black icon */
.energy-stat-row.highlighted .energy-stat-icon {
  background: var(--accent);
  border: none;
  box-shadow: none;
}

.energy-stat-row.highlighted .energy-stat-icon svg {
  color: #000;
}

.energy-stat-content {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* Footer row - plan name left, validity right */
.energy-service-footer-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 14px;
  border-top: 1px solid var(--border-subtle);
}

.energy-plan-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
}

.energy-plan-validity {
  font-size: 11px;
  color: var(--text-muted);
}

/* Menu List */
.menu-list {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  margin-bottom: 12px;
}

.menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  cursor: pointer;
  transition: background 0.2s ease;
  border-bottom: 1px solid var(--border-subtle);
}

.menu-item:last-child {
  border-bottom: none;
}

.menu-item:hover {
  background: var(--bg-tertiary);
}

.menu-item.logout:hover {
  background: var(--error-soft);
}

.menu-item-icon {
  width: 36px;
  height: 36px;
  background: var(--bg-tertiary);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.menu-item.logout .menu-item-icon {
  background: var(--error-soft);
}

.menu-item-icon svg {
  width: 18px;
  height: 18px;
  color: var(--text-secondary);
}

.menu-item.logout .menu-item-icon svg {
  color: var(--error);
}

.menu-item-content {
  flex: 1;
  min-width: 0;
}

.menu-item-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.menu-item.logout .menu-item-title {
  color: var(--error);
}

.menu-item-subtitle {
  font-size: 10px;
  color: var(--text-muted);
}

.menu-item-arrow {
  color: var(--text-muted);
}

.menu-item-arrow svg {
  width: 16px;
  height: 16px;
}

/* QR Modal Overlay */
.qr-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.qr-modal-overlay.active {
  opacity: 1;
  visibility: visible;
}

.qr-modal {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-xl);
  padding: 24px;
  max-width: 340px;
  width: 100%;
  animation: modalSlideUp 0.3s ease-out;
}

.qr-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.qr-modal-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
}

.qr-modal-close {
  width: 32px;
  height: 32px;
  background: var(--bg-tertiary);
  border: none;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
}

.qr-modal-close svg {
  width: 16px;
  height: 16px;
  color: var(--text-secondary);
}

.qr-modal-close:hover {
  background: var(--error-soft);
}

.qr-modal-close:hover svg {
  color: var(--error);
}

.qr-modal-body {
  text-align: center;
}

.qr-modal-desc {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.5;
  margin-bottom: 16px;
}

.qr-input-group {
  margin-bottom: 16px;
  text-align: left;
}

.qr-input-label {
  display: block;
  font-size: 11px;
  font-weight: 500;
  color: var(--text-secondary);
  margin-bottom: 6px;
}

.qr-input {
  width: 100%;
  padding: 12px 14px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-family: 'DM Mono', monospace;
  font-size: 13px;
  color: var(--text-primary);
  transition: all 0.2s ease;
}

.qr-input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-soft);
}

.qr-input::placeholder {
  color: var(--text-muted);
}

.qr-generate-btn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 14px 20px;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
  border: none;
  border-radius: var(--radius-md);
  font-family: 'Outfit', sans-serif;
  font-size: 14px;
  font-weight: 600;
  color: var(--bg-primary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.qr-generate-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px -8px var(--accent-glow);
}

.qr-generate-btn svg {
  width: 18px;
  height: 18px;
}

.qr-display-section {
  animation: fadeSlideIn 0.3s ease-out;
}

.qr-display-section.hidden {
  display: none;
}

.qr-code-container {
  background: white;
  padding: 20px;
  border-radius: var(--radius-lg);
  margin-bottom: 16px;
  display: inline-block;
}

.qr-transaction-info {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-bottom: 12px;
}

.qr-transaction-label {
  font-size: 11px;
  color: var(--text-muted);
}

.qr-transaction-value {
  font-size: 12px;
  font-weight: 600;
  color: var(--accent);
  font-family: 'DM Mono', monospace;
}

.qr-instruction {
  font-size: 11px;
  color: var(--text-secondary);
  margin-bottom: 16px;
}

.qr-new-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 20px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-family: 'Outfit', sans-serif;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
  margin: 0 auto;
}

.qr-new-btn:hover {
  background: var(--bg-elevated);
  color: var(--text-primary);
}

.qr-new-btn svg {
  width: 16px;
  height: 16px;
}

/* Small screen adjustments for Rider */
@media (max-height: 700px) {
  .rider-bg-gradient {
    height: 200px;
  }
  
  .rider-dashboard-header {
    margin-bottom: 12px;
    padding-top: 4px;
  }
  
  .rider-name {
    font-size: 18px;
  }
  
  .rider-bike-card {
    padding: 12px;
    margin-bottom: 10px;
  }
  
  .rider-bike-image {
    width: 120px;
    height: 85px;
  }
  
  .account-balance-card {
    padding: 12px;
    margin-bottom: 12px;
  }
  
  .account-balance-value {
    font-size: 18px;
  }
  
  .quick-actions {
    gap: 8px;
    margin-bottom: 16px;
  }
  
  .quick-action {
    padding: 12px 10px;
  }
  
  .quick-action-icon {
    width: 38px;
    height: 38px;
  }
  
  .stations-map {
    height: 100px;
  }
  
  .profile-avatar {
    width: 60px;
    height: 60px;
    font-size: 20px;
  }
  
  .profile-name {
    font-size: 16px;
  }
  
  .energy-service-visual {
    height: 80px;
  }
  
  .energy-service-bike {
    height: 80px;
  }
}

/* =============================================================================
   Package Selection Styles (Step 2 - Sales Flow)
   ============================================================================= */

/* Package badge on cards */
.package-badge {
  position: absolute;
  top: 8px;
  left: 8px;
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
  border-radius: 10px;
  font-size: 9px;
  font-weight: 600;
  color: white;
  z-index: 2;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.package-badge svg {
  width: 10px;
  height: 10px;
}

/* Package includes text */
.package-includes {
  font-size: 9px;
  color: var(--text-muted);
  margin-top: 4px;
  text-align: center;
}

.vehicle-card.package-card {
  padding-top: 28px;
}

/* =============================================================================
   Preview Step Styles (Step 4 - Order Summary) - Simplified Design
   ============================================================================= */

/* Total Amount Card - Prominent at Top */
.preview-total-card {
  background: var(--accent);
  border-radius: var(--radius-lg);
  padding: 16px 20px;
  text-align: center;
  margin-bottom: 12px;
}

.preview-total-label {
  font-size: 12px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.85);
  margin-bottom: 4px;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.preview-total-amount {
  font-family: 'DM Mono', monospace;
  font-size: 28px;
  font-weight: 700;
  color: white;
}

/* Simple Card - Base Style */
.preview-simple-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 14px;
  margin-bottom: 12px;
}

.preview-card-title {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.04em;
  margin-bottom: 10px;
}

.preview-card-header {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Customer Avatar */
.preview-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: var(--accent);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  flex-shrink: 0;
}

.preview-customer-info {
  flex: 1;
  min-width: 0;
}

.preview-customer-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.preview-customer-contact {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.4;
}

/* Item Row - Package/Subscription */
.preview-item-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.preview-item-image {
  width: 48px;
  height: 48px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  overflow: hidden;
}

.preview-item-image svg {
  width: 24px;
  height: 24px;
  color: var(--text-muted);
}

.preview-item-details {
  flex: 1;
  min-width: 0;
}

.preview-item-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.preview-item-sub {
  font-size: 11px;
  color: var(--text-secondary);
  margin-top: 2px;
}

.preview-item-price {
  font-family: 'DM Mono', monospace;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  flex-shrink: 0;
}

/* Package Components - Always Visible */
.preview-components {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--border-subtle);
}

.preview-components-title {
  font-size: 11px;
  font-weight: 500;
  color: var(--text-muted);
  margin-bottom: 8px;
}

.preview-component-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 0;
}

.preview-component-name {
  font-size: 12px;
  color: var(--text-secondary);
}

.preview-component-price {
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  color: var(--text-muted);
}

/* Ready to Proceed Message */
.preview-ready-message {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 16px;
  background: var(--success-soft);
  border: 1px solid var(--success);
  border-radius: var(--radius-md);
  font-size: 12px;
  font-weight: 500;
  color: var(--success);
}

.preview-ready-message svg {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

/* =============================================================================
   Compact Preview Styles (Order Summary - No Scroll Layout)
   ============================================================================= */

.compact-preview {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 8px 0 !important;
}

/* Compact Header with Inline Total */
.preview-compact-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  background: var(--accent);
  border-radius: var(--radius-lg);
  margin-bottom: 4px;
}

.preview-compact-title {
  font-size: 14px;
  font-weight: 600;
  color: white;
  margin: 0;
}

.preview-compact-total {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.preview-compact-total-label {
  font-size: 10px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.75);
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.preview-compact-total-amount {
  font-family: 'DM Mono', monospace;
  font-size: 18px;
  font-weight: 700;
  color: white;
}

/* Customer Row - Compact Inline */
.preview-compact-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
}

.preview-compact-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--accent);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 600;
  flex-shrink: 0;
}

.preview-compact-info {
  flex: 1;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 4px 12px;
  min-width: 0;
}

.preview-compact-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
}

.preview-compact-detail {
  font-size: 11px;
  color: var(--text-secondary);
}

/* Compact Cards Grid */
.preview-compact-grid {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.preview-compact-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: 10px 12px;
}

.preview-compact-card-header {
  display: flex;
  align-items: center;
  gap: 10px;
}

.preview-compact-card-icon {
  width: 32px;
  height: 32px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.preview-compact-card-icon svg {
  width: 18px;
  height: 18px;
  color: var(--text-muted);
}

.preview-compact-card-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.preview-compact-card-label {
  font-size: 9px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.preview-compact-card-name {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.preview-compact-card-price {
  font-family: 'DM Mono', monospace;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-primary);
  flex-shrink: 0;
}

/* Compact Components List */
.preview-compact-components {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border-subtle);
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 4px 12px;
}

.preview-compact-component {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 10px;
  color: var(--text-secondary);
  gap: 4px;
}

.preview-compact-component span:first-child {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.preview-compact-component span:last-child {
  font-family: 'DM Mono', monospace;
  font-size: 9px;
  color: var(--text-muted);
  flex-shrink: 0;
}

/* Compact Ready Message */
.preview-compact-ready {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 12px;
  background: var(--success-soft);
  border: 1px solid var(--success);
  border-radius: var(--radius-md);
  font-size: 11px;
  font-weight: 500;
  color: var(--success);
  margin-top: auto;
}

.preview-compact-ready svg {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

/* ===================== */
/* SESSIONS HISTORY      */
/* ===================== */

.sessions-history-overlay {
  position: fixed;
  inset: 0;
  z-index: 100;
  background: rgba(10, 15, 15, 0.95);
  backdrop-filter: blur(8px);
  display: flex;
  flex-direction: column;
  animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.sessions-history-modal {
  flex: 1;
  display: flex;
  flex-direction: column;
  max-height: 100%;
  overflow: hidden;
}

.sessions-history-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 16px 12px;
  border-bottom: 1px solid var(--border);
  background: var(--bg-secondary);
  flex-shrink: 0;
}

.sessions-history-header-title {
  display: flex;
  align-items: center;
  gap: 10px;
  color: var(--text-primary);
}

.sessions-history-header-title h2 {
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-xl);
  font-weight: 600;
  margin: 0;
}

.sessions-history-header-title svg {
  color: var(--accent);
}

.sessions-history-close {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.sessions-history-close:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

/* Search */
.sessions-search-container {
  display: flex;
  gap: 8px;
  padding: 12px 16px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.sessions-search-input-wrapper {
  flex: 1;
  position: relative;
  display: flex;
  align-items: center;
}

.sessions-search-icon {
  position: absolute;
  left: 12px;
  color: var(--text-muted);
  pointer-events: none;
}

.sessions-search-input {
  width: 100%;
  height: 40px;
  padding: 0 36px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-md);
  outline: none;
  transition: border-color 0.15s ease;
}

.sessions-search-input::placeholder {
  color: var(--text-muted);
}

.sessions-search-input:focus {
  border-color: var(--accent);
}

.sessions-search-clear {
  position: absolute;
  right: 8px;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-elevated);
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
}

.sessions-search-clear:hover {
  color: var(--text-primary);
}

.sessions-search-btn {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--accent);
  border: none;
  border-radius: var(--radius-md);
  color: var(--bg-primary);
  cursor: pointer;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.sessions-search-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px -2px var(--accent-glow);
}

.sessions-search-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* Content */
.sessions-history-content {
  flex: 1;
  overflow-y: auto;
  padding: 12px 16px;
  -webkit-overflow-scrolling: touch;
}

/* Loading */
.sessions-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 48px 24px;
  color: var(--text-secondary);
  font-size: var(--font-md);
}

.sessions-loading svg {
  color: var(--accent);
}

/* Error */
.sessions-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 48px 24px;
  text-align: center;
}

.sessions-error svg {
  color: var(--error);
}

.sessions-error p {
  color: var(--text-secondary);
  font-size: var(--font-md);
}

.sessions-retry-btn {
  padding: 10px 20px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-md);
  cursor: pointer;
  transition: all 0.15s ease;
}

.sessions-retry-btn:hover {
  background: var(--bg-elevated);
}

/* Empty State */
.sessions-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 48px 24px;
  text-align: center;
}

.sessions-empty-icon {
  color: var(--text-muted);
  opacity: 0.5;
  margin-bottom: 8px;
}

.sessions-empty h3 {
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-lg);
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.sessions-empty p {
  font-size: var(--font-md);
  color: var(--text-muted);
  margin: 0;
  max-width: 260px;
}

/* Sessions List */
.sessions-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Session Card */
.session-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  transition: all 0.15s ease;
}

.session-card-resumable {
  cursor: pointer;
}

.session-card-resumable:hover {
  background: var(--bg-tertiary);
  border-color: var(--accent);
  transform: translateX(2px);
}

.session-card-resumable:active {
  transform: translateX(0);
}

.session-card-viewable {
  cursor: pointer;
}

.session-card-viewable:hover {
  background: var(--bg-tertiary);
  border-color: var(--text-muted);
  transform: translateX(2px);
}

.session-card-viewable:active {
  transform: translateX(0);
}

.session-card-locked {
  opacity: 0.5;
  cursor: not-allowed;
}

.session-card-avatar {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  flex-shrink: 0;
}

.session-card-resumable .session-card-avatar {
  background: var(--accent-soft);
  color: var(--accent);
}

.session-card-viewable .session-card-avatar {
  background: var(--bg-elevated);
  color: var(--text-secondary);
}

.session-card-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.session-card-name {
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-lg);
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.session-card-subscription {
  font-family: 'DM Mono', monospace;
  font-size: var(--font-sm);
  color: var(--accent);
}

.session-card-meta {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: var(--font-sm);
  color: var(--text-muted);
}

.session-card-dot {
  opacity: 0.5;
}

.session-card-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 6px;
  flex-shrink: 0;
}

.session-card-status {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-xs);
  font-weight: 500;
}

.session-card-action {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--accent);
  border-radius: var(--radius-sm);
  color: var(--bg-primary);
}

.session-card-action-view {
  background: var(--bg-elevated);
  color: var(--text-secondary);
  border: 1px solid var(--border);
}

/* Read-only Mode Banner */
.readonly-banner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--color-warning-soft);
  border: 1px solid var(--color-warning);
  border-radius: var(--radius-md);
  padding: 12px 16px;
  margin: 8px 16px;
  gap: 12px;
  box-shadow: 0 2px 8px rgba(251, 191, 36, 0.1);
}

.readonly-banner-content {
  display: flex;
  align-items: center;
  gap: 10px;
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 500;
}

.readonly-banner-content svg {
  color: var(--color-warning);
  flex-shrink: 0;
}

.readonly-banner-exit {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 14px;
  background: var(--color-warning-soft);
  border: 1px solid rgba(251, 191, 36, 0.4);
  border-radius: var(--radius-sm);
  color: #fbbf24;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.readonly-banner-exit:hover {
  background: var(--color-warning-soft);
  border-color: var(--color-warning);
}

.readonly-banner-exit:active {
  transform: scale(0.98);
}

/* Read-only main area styling - fainter view */
.attendant-main-readonly {
  position: relative;
}

.attendant-main-readonly::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--readonly-overlay, rgba(0, 0, 0, 0.08));
  pointer-events: none;
  z-index: 1;
  border-radius: var(--radius-md);
}

/* Disable interactive elements in read-only mode */
.attendant-main-readonly button,
.attendant-main-readonly input,
.attendant-main-readonly select,
.attendant-main-readonly textarea,
.attendant-main-readonly .selectable-card,
.attendant-main-readonly [role="button"] {
  pointer-events: none;
  opacity: 0.7;
}

/* Sales workflow read-only main area styling */
.sales-main-readonly {
  position: relative;
}

.sales-main-readonly::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--readonly-overlay, rgba(0, 0, 0, 0.08));
  pointer-events: none;
  z-index: 1;
  border-radius: inherit;
}

.sales-main-readonly button,
.sales-main-readonly input,
.sales-main-readonly select,
.sales-main-readonly textarea,
.sales-main-readonly .selectable-card,
.sales-main-readonly [role="button"] {
  pointer-events: none;
  opacity: 0.7;
}

/* Read-only timeline styles - use amber/yellow color scheme */
.flow-timeline-readonly {
  opacity: 0.9;
}

.flow-timeline-readonly .timeline-step.readonly-active .timeline-dot {
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  border-color: #fbbf24;
  box-shadow: 0 0 12px rgba(251, 191, 36, 0.4);
}

.flow-timeline-readonly .timeline-step.readonly-active .timeline-label {
  color: #fbbf24;
}

.flow-timeline-readonly .timeline-step.readonly-completed .timeline-dot {
  background: linear-gradient(135deg, rgba(251, 191, 36, 0.3), rgba(245, 158, 11, 0.3));
  border-color: rgba(251, 191, 36, 0.5);
}

.flow-timeline-readonly .timeline-step.readonly-completed .timeline-label {
  color: rgba(251, 191, 36, 0.7);
}

.flow-timeline-readonly .timeline-step.readonly-reachable .timeline-dot {
  background: var(--bg-tertiary);
  border-color: rgba(251, 191, 36, 0.4);
}

.flow-timeline-readonly .timeline-step.readonly-reachable .timeline-label {
  color: var(--text-muted);
}

.flow-timeline-readonly .timeline-step.readonly-success .timeline-dot {
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  border-color: #fbbf24;
  box-shadow: 0 0 16px rgba(251, 191, 36, 0.5);
}

.flow-timeline-readonly .timeline-step.readonly-success .timeline-label {
  color: #fbbf24;
}

.flow-timeline-readonly .timeline-connector.readonly-completed {
  background: linear-gradient(90deg, rgba(251, 191, 36, 0.4), rgba(245, 158, 11, 0.4));
}

/* Action bar in read-only mode */
.action-bar-readonly {
  pointer-events: auto;
}

.action-bar-readonly .action-bar-inner {
  justify-content: space-between;
}

.session-card-progress {
  font-family: 'DM Mono', monospace;
  font-size: var(--font-xs);
  color: var(--text-muted);
}

/* Pagination */
.sessions-pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  padding: 12px 16px;
  border-top: 1px solid var(--border);
  background: var(--bg-secondary);
  flex-shrink: 0;
}

.sessions-pagination-btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.sessions-pagination-btn:hover:not(:disabled) {
  background: var(--bg-elevated);
  color: var(--text-primary);
}

.sessions-pagination-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.sessions-pagination-info {
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-md);
  color: var(--text-secondary);
}

/* Footer Hint */
.sessions-footer-hint {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px 16px;
  background: var(--bg-tertiary);
  font-size: var(--font-sm);
  color: var(--text-muted);
  flex-shrink: 0;
}

.sessions-footer-hint svg {
  opacity: 0.6;
  flex-shrink: 0;
}

/* Mobile Adjustments */
@media (max-width: 400px) {
  .sessions-history-header {
    padding: 14px;
  }
  
  .sessions-search-container {
    padding: 10px 14px;
  }
  
  .sessions-history-content {
    padding: 10px 14px;
  }
  
  .session-card {
    padding: 10px 12px;
  }
  
  .session-card-avatar {
    width: 36px;
    height: 36px;
  }
  
  .session-card-name {
    font-size: var(--font-md);
  }
}

/* =====================================================
   ATTENDANT NAVIGATION & MENU STYLES
   ===================================================== */

/* Attendant Bottom Navigation - inherits from .bottom-nav, same as Rider */
.attendant-nav {
  /* Uses base .bottom-nav styles - matches Rider design */
}

/* Bottom fixed area - contains action bar and navigation together */
.attendant-bottom-fixed {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 100;
  display: flex;
  flex-direction: column;
  pointer-events: none;
}

.attendant-bottom-fixed > * {
  pointer-events: auto;
}

/* When inside bottom-fixed wrapper, action bar is not fixed anymore */
.attendant-bottom-fixed .action-bar {
  position: relative;
  bottom: auto;
  left: auto;
  transform: none;
  width: 100%;
  max-width: 100%;
  padding: 8px 16px;
  background: linear-gradient(to top, var(--bg-primary) 90%, transparent);
}

/* When inside bottom-fixed wrapper, nav is not fixed anymore */
.attendant-bottom-fixed .attendant-nav,
.attendant-bottom-fixed .bottom-nav {
  position: relative;
  bottom: auto;
  left: auto;
  right: auto;
  z-index: auto;
}

@media (max-height: 700px) {
  .attendant-bottom-fixed .action-bar {
    padding: 6px 12px;
  }
}

/* Attendant nav items now use .bottom-nav-item from the shared component */
/* Legacy selectors kept for backward compatibility if any other code uses them */
.attendant-nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 8px 12px;
  background: transparent;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  color: var(--text-muted);
  font-family: 'Outfit', sans-serif;
}

.attendant-nav-item:hover {
  color: var(--text-secondary);
}

.attendant-nav-item.active {
  color: var(--accent);
}

.attendant-nav-item svg {
  width: 22px;
  height: 22px;
  transition: all 0.2s ease;
}

.attendant-nav-item.active svg {
  transform: scale(1.1);
}

.attendant-nav-label {
  font-size: 10px;
  font-weight: 500;
}

/* Attendant Screen Container */
.attendant-screen-container {
  flex: 1;
  overflow-y: auto;
  padding-bottom: 20px;
  -webkit-overflow-scrolling: touch;
}

.attendant-main-full {
  padding-bottom: 0;
}

.attendant-main-screen {
  flex: 1;
  overflow-y: auto;
  padding-bottom: 70px; /* Space for bottom nav */
}

/* =====================================================
   COMPACT LAYOUT FOR ATTENDANT WITH BOTTOM NAV
   Makes content more compact so buttons aren't hidden
   ===================================================== */

/* Compact header when bottom nav present */
.attendant-container.has-bottom-nav .flow-header {
  padding: 8px 12px;
}

.attendant-container.has-bottom-nav .flow-header-back {
  width: 28px;
  height: 28px;
}

.attendant-container.has-bottom-nav .flow-header-back svg {
  width: 14px;
  height: 14px;
}

.attendant-container.has-bottom-nav .flow-header-lang {
  padding: 4px 8px;
  font-size: 10px;
}

.attendant-container.has-bottom-nav .flow-header-logo img {
  height: 20px;
}

/* Compact scan prompt */
.attendant-container.has-bottom-nav .scan-prompt {
  padding-top: 8px;
}

.attendant-container.has-bottom-nav .scan-title {
  font-size: 16px;
  margin-bottom: 2px;
}

.attendant-container.has-bottom-nav .scan-subtitle {
  font-size: 11px;
  margin-bottom: 10px;
}

/* Compact scanner area */
.attendant-container.has-bottom-nav .scanner-area {
  width: 150px;
  height: 150px;
  margin: 0 auto 12px;
}

.attendant-container.has-bottom-nav .scanner-corners {
  inset: 10px;
}

.attendant-container.has-bottom-nav .scanner-corners::before,
.attendant-container.has-bottom-nav .scanner-corners::after,
.attendant-container.has-bottom-nav .scanner-corner-bl,
.attendant-container.has-bottom-nav .scanner-corner-br {
  width: 18px;
  height: 18px;
}

.attendant-container.has-bottom-nav .scanner-icon {
  width: 36px;
  height: 36px;
}

.attendant-container.has-bottom-nav .scanner-label {
  font-size: 11px;
  margin-top: 6px;
}

.attendant-container.has-bottom-nav .scan-hint {
  font-size: 10px;
  gap: 6px;
  margin-top: 8px;
}

.attendant-container.has-bottom-nav .scan-hint svg {
  width: 14px;
  height: 14px;
}

/* Compact input toggle */
.attendant-container.has-bottom-nav .input-toggle {
  gap: 6px;
  margin-bottom: 12px;
}

.attendant-container.has-bottom-nav .toggle-btn {
  padding: 8px 12px;
  font-size: 11px;
  gap: 6px;
}

.attendant-container.has-bottom-nav .toggle-btn svg {
  width: 14px;
  height: 14px;
}

/* Compact manual entry */
.attendant-container.has-bottom-nav .manual-entry-form {
  padding: 12px;
}

.attendant-container.has-bottom-nav .form-label {
  font-size: 9px;
  margin-bottom: 3px;
}

.attendant-container.has-bottom-nav .form-input {
  padding: 10px 12px;
  font-size: 13px;
}

/* Compact device list */
.attendant-container.has-bottom-nav .device-list {
  max-height: 180px;
  gap: 6px;
}

.attendant-container.has-bottom-nav .device-item {
  padding: 10px 12px;
}

.attendant-container.has-bottom-nav .device-name {
  font-size: 12px;
}

.attendant-container.has-bottom-nav .device-mac {
  font-size: 9px;
}

.attendant-container.has-bottom-nav .device-rssi {
  font-size: 9px;
}

/* Compact customer state panel */
.attendant-container.has-bottom-nav .customer-state-panel {
  padding: 10px 12px;
  margin-bottom: 10px;
}

.attendant-container.has-bottom-nav .state-customer-name {
  font-size: 13px;
}

.attendant-container.has-bottom-nav .state-subscription-id {
  font-size: 9px;
}

.attendant-container.has-bottom-nav .state-quotas {
  gap: 6px;
  padding-bottom: 8px;
  margin-top: 6px;
}

.attendant-container.has-bottom-nav .state-quota-item {
  padding: 6px 8px;
  font-size: 10px;
}

/* Compact battery scan card */
.attendant-container.has-bottom-nav .battery-scanned-card {
  padding: 12px;
}

.attendant-container.has-bottom-nav .battery-scanned-header {
  gap: 10px;
  padding-bottom: 8px;
  margin-bottom: 10px;
}

.attendant-container.has-bottom-nav .battery-scanned-icon-wrapper {
  width: 36px;
  height: 36px;
}

.attendant-container.has-bottom-nav .battery-scanned-icon {
  width: 18px;
  height: 18px;
}

.attendant-container.has-bottom-nav .battery-scanned-title {
  font-size: 13px;
}

.attendant-container.has-bottom-nav .battery-scanned-subtitle {
  font-size: 10px;
}

.attendant-container.has-bottom-nav .battery-scanned-grid {
  gap: 8px;
}

.attendant-container.has-bottom-nav .battery-scanned-item {
  padding: 8px;
}

.attendant-container.has-bottom-nav .battery-item-label {
  font-size: 9px;
}

.attendant-container.has-bottom-nav .battery-item-value {
  font-size: 12px;
}

/* Compact action bar styles */
.attendant-bottom-fixed .action-bar-inner {
  gap: 8px;
}

.attendant-bottom-fixed .action-bar .btn {
  padding: 10px 14px;
  font-size: 12px;
  gap: 6px;
}

.attendant-bottom-fixed .action-bar .btn svg {
  width: 16px;
  height: 16px;
}

/* Compact first-time customer message */
.attendant-container.has-bottom-nav .first-time-msg {
  padding: 10px 12px;
  font-size: 11px;
}

/* Compact expected battery info */
.attendant-container.has-bottom-nav .expected-battery-info {
  padding: 10px 12px;
  margin-top: 10px;
}

.attendant-container.has-bottom-nav .expected-battery-title {
  font-size: 10px;
}

.attendant-container.has-bottom-nav .expected-battery-id {
  font-size: 12px;
}

/* Compact QR scanner area (for payment) */
.attendant-container.has-bottom-nav .qr-scanner-area {
  width: 120px;
  height: 120px;
  margin: 0 auto 10px;
}

.attendant-container.has-bottom-nav .confirm-payment-cta {
  width: 120px;
  height: 120px;
  margin: 12px auto;
}

.attendant-container.has-bottom-nav .confirm-payment-cta svg {
  width: 36px;
  height: 36px;
}

.attendant-container.has-bottom-nav .confirm-payment-cta span {
  font-size: 11px;
}

/* Compact success receipt */
.attendant-container.has-bottom-nav .success-receipt {
  padding: 16px;
}

.attendant-container.has-bottom-nav .success-icon-wrapper {
  width: 48px;
  height: 48px;
  margin-bottom: 12px;
}

.attendant-container.has-bottom-nav .success-icon {
  width: 24px;
  height: 24px;
}

.attendant-container.has-bottom-nav .success-title {
  font-size: 18px;
  margin-bottom: 4px;
}

.attendant-container.has-bottom-nav .success-message {
  font-size: 12px;
  margin-bottom: 16px;
}

.attendant-container.has-bottom-nav .receipt-card {
  padding: 12px;
}

.attendant-container.has-bottom-nav .receipt-header {
  padding-bottom: 8px;
  margin-bottom: 8px;
}

.attendant-container.has-bottom-nav .receipt-title {
  font-size: 11px;
}

.attendant-container.has-bottom-nav .receipt-id {
  font-size: 10px;
}

.attendant-container.has-bottom-nav .receipt-row {
  font-size: 11px;
  padding: 4px 0;
}

/* Compact payment collection */
.attendant-container.has-bottom-nav .payment-header-compact {
  padding: 10px 12px;
}

.attendant-container.has-bottom-nav .payment-header-compact .payment-customer-name {
  font-size: 13px;
}

.attendant-container.has-bottom-nav .payment-header-compact .payment-customer-id {
  font-size: 9px;
}

.attendant-container.has-bottom-nav .payment-amount-large {
  font-size: 18px;
}

.attendant-container.has-bottom-nav .payment-amount-label {
  font-size: 10px;
}

.attendant-container.has-bottom-nav .payment-amount-value {
  font-size: 13px;
}

.attendant-container.has-bottom-nav .payment-amount-value.payment-amount-remaining {
  font-size: 16px;
}

.attendant-container.has-bottom-nav .payment-input-mode {
  padding: 12px;
}

.attendant-container.has-bottom-nav .payment-input-mode .scan-title {
  font-size: 15px;
}

.attendant-container.has-bottom-nav .payment-input-mode .scan-subtitle {
  font-size: 11px;
  margin-bottom: 10px;
}

/* Bottom nav in fixed wrapper uses same styles as base - no compact overrides */
/* This ensures consistent nav size across all screens */

/* =====================================================
   ATTENDANT TRANSACTIONS STYLES
   ===================================================== */

.attendant-transactions {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding-bottom: 20px;
}

/* Transactions Header */
.transactions-header {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.transactions-header-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.transactions-title {
  font-size: var(--font-xl);
  font-weight: 700;
  color: var(--text-primary);
  margin: 0;
}

.transactions-refresh-btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.transactions-refresh-btn:hover:not(:disabled) {
  background: var(--bg-elevated);
  color: var(--text-primary);
}

.transactions-refresh-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.transactions-refresh-btn .spinning {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Period Filter */
.transactions-filter {
  position: relative;
}

.period-selector {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: var(--font-sm);
  font-family: 'Outfit', sans-serif;
  cursor: pointer;
  transition: all 0.2s ease;
}

.period-selector:hover {
  background: var(--bg-elevated);
  color: var(--text-primary);
}

.period-selector .chevron {
  transition: transform 0.2s ease;
}

.period-selector .chevron.open {
  transform: rotate(90deg);
}

.period-dropdown {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  right: 0;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  overflow: hidden;
  z-index: 100;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
}

.period-option {
  width: 100%;
  padding: 10px 12px;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: var(--font-sm);
  font-family: 'Outfit', sans-serif;
  text-align: left;
  cursor: pointer;
  transition: all 0.15s ease;
}

.period-option:hover {
  background: var(--bg-surface-hover);
  color: var(--text-primary);
}

.period-option.active {
  background: var(--accent-soft);
  color: var(--accent);
}

/* Transactions Summary */
.transactions-summary {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

.summary-card {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  text-align: center;
}

.summary-label {
  font-size: var(--font-xs);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.summary-value {
  font-size: var(--font-lg);
  font-weight: 700;
  color: var(--text-primary);
}

/* Transactions Loading */
.transactions-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  gap: 16px;
}

.transactions-loading p {
  color: var(--text-muted);
  font-size: var(--font-sm);
}

/* Transactions Error */
.transactions-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  gap: 16px;
  text-align: center;
}

.transactions-error p {
  color: var(--color-error);
  font-size: var(--font-sm);
}

.retry-btn {
  padding: 10px 20px;
  background: var(--accent);
  border: none;
  border-radius: var(--radius-md);
  color: var(--text-inverse);
  font-size: var(--font-sm);
  font-weight: 600;
  font-family: 'Outfit', sans-serif;
  cursor: pointer;
  transition: all 0.2s ease;
}

.retry-btn:hover {
  opacity: 0.9;
}

/* Transactions Empty */
.transactions-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  gap: 12px;
  text-align: center;
}

.transactions-empty svg {
  color: var(--text-muted);
  opacity: 0.5;
}

.transactions-empty p {
  color: var(--text-secondary);
  font-size: var(--font-md);
  font-weight: 500;
  margin: 0;
}

.transactions-empty .empty-hint {
  color: var(--text-muted);
  font-size: var(--font-sm);
}

/* Transactions List */
.transactions-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Transaction Card */
.transaction-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.transaction-card:hover {
  background: var(--bg-tertiary);
  border-color: var(--border-focus);
}

.transaction-main {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.transaction-customer {
  display: flex;
  align-items: center;
  gap: 10px;
}

.customer-avatar {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--accent-soft);
  border-radius: 50%;
  color: var(--accent);
}

.customer-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.customer-name {
  font-size: var(--font-base);
  font-weight: 600;
  color: var(--text-primary);
}

.customer-phone {
  font-size: var(--font-xs);
  color: var(--text-muted);
}

.transaction-amount {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
}

.transaction-amount .amount {
  font-size: var(--font-md);
  font-weight: 700;
  color: var(--text-primary);
}

.transaction-badge {
  display: inline-block;
  padding: 2px 8px;
  font-size: var(--font-2xs);
  font-weight: 600;
  border-radius: var(--radius-sm);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.transaction-badge-success {
  background: var(--color-success-soft);
  color: var(--color-success);
}

.transaction-badge-warning {
  background: var(--color-warning-soft);
  color: var(--color-warning);
}

.transaction-badge-error {
  background: var(--color-error-soft);
  color: var(--color-error);
}

.transaction-badge-default {
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.transaction-details {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding-top: 12px;
  border-top: 1px solid var(--border);
}

.detail-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.detail-label {
  font-size: var(--font-xs);
  color: var(--text-muted);
}

.detail-value {
  font-size: var(--font-sm);
  color: var(--text-secondary);
}

.detail-value.reference {
  font-family: 'DM Mono', monospace;
  font-size: var(--font-xs);
  max-width: 180px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Transactions Date Range */
.transactions-date-range {
  display: flex;
  justify-content: center;
  padding: 8px 0;
}

.transactions-date-range span {
  font-size: var(--font-xs);
  color: var(--text-muted);
  font-family: 'DM Mono', monospace;
}

/* =====================================================
   ATTENDANT PROFILE STYLES
   ===================================================== */

.attendant-profile {
  display: flex;
  flex-direction: column;
  gap: 24px;
  padding-bottom: 24px;
}

/* Profile Header */
.profile-header {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 20px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
}

.profile-avatar {
  width: 64px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--accent), var(--color-brand-dark));
  border-radius: 50%;
  font-size: var(--font-xl);
  font-weight: 700;
  color: white;
  flex-shrink: 0;
}

.profile-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.profile-name {
  font-size: var(--font-xl);
  font-weight: 700;
  color: var(--text-primary);
  margin: 0;
}

.profile-role {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: var(--font-sm);
  color: var(--text-muted);
}

.profile-role svg {
  color: var(--accent);
}

/* Profile Section */
.profile-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.profile-section-title {
  font-size: var(--font-sm);
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0;
  padding-left: 4px;
}

/* Profile Details Card */
.profile-details-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.profile-detail-row {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
}

.profile-detail-row:last-child {
  border-bottom: none;
}

.detail-icon {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  color: var(--text-muted);
  flex-shrink: 0;
}

.detail-content {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.detail-content .detail-label {
  font-size: var(--font-xs);
  color: var(--text-muted);
}

.detail-content .detail-value {
  font-size: var(--font-base);
  color: var(--text-primary);
  word-break: break-all;
}

/* Profile Actions */
.profile-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.profile-action-btn {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all 0.2s ease;
}

.profile-action-btn:hover {
  background: var(--bg-tertiary);
}

.profile-action-btn .action-left {
  display: flex;
  align-items: center;
  gap: 12px;
  color: var(--text-primary);
  font-size: var(--font-base);
  font-weight: 500;
  font-family: 'Outfit', sans-serif;
}

.profile-action-btn .action-chevron {
  color: var(--text-muted);
}

.profile-action-btn.logout {
  border-color: var(--color-error-soft);
}

.profile-action-btn.logout .action-left {
  color: var(--color-error);
}

.profile-action-btn.logout .action-left svg {
  color: var(--color-error);
}

/* Profile Footer */
.profile-footer {
  display: flex;
  justify-content: center;
  padding-top: 24px;
}

.app-version {
  font-size: var(--font-xs);
  color: var(--text-muted);
  font-family: 'DM Mono', monospace;
}

/* =====================================================
   ATTENDANT SESSIONS STYLES
   ===================================================== */

.attendant-sessions {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding-bottom: 20px;
}

.sessions-header-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.sessions-title {
  font-size: var(--font-xl);
  font-weight: 700;
  color: var(--text-primary);
  margin: 0;
}

.sessions-refresh-btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.sessions-refresh-btn:hover:not(:disabled) {
  background: var(--bg-elevated);
  color: var(--text-primary);
}

.sessions-refresh-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Sessions Loading */
.sessions-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  gap: 16px;
}

.sessions-loading p {
  color: var(--text-muted);
  font-size: var(--font-sm);
}

/* Sessions Error */
.sessions-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  gap: 16px;
  text-align: center;
}

.sessions-error p {
  color: var(--color-error);
  font-size: var(--font-sm);
}

/* Sessions Empty */
.sessions-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  gap: 12px;
  text-align: center;
}

.sessions-empty svg {
  color: var(--text-muted);
  opacity: 0.5;
}

.sessions-empty p {
  color: var(--text-secondary);
  font-size: var(--font-md);
  font-weight: 500;
  margin: 0;
}

/* Sessions List */
.sessions-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Session Card Item */
.session-card-item {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.session-card-item:hover {
  background: var(--bg-tertiary);
  border-color: var(--border-focus);
}

.session-card-item.resumable {
  /* Same styling as regular cards - no special border */
}

.session-card-item.resumable:hover {
  background: var(--bg-tertiary);
  border-color: var(--border-focus);
}

.session-card-main {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.session-card-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.session-avatar {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--accent-soft);
  border-radius: 50%;
  color: var(--accent);
}

.session-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.session-customer-name {
  font-size: var(--font-base);
  font-weight: 600;
  color: var(--text-primary);
}

.session-order-name {
  font-size: var(--font-xs);
  color: var(--text-muted);
  font-family: 'DM Mono', monospace;
}

.session-subscription-code {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: var(--font-xs);
  color: var(--accent);
  font-family: 'DM Mono', monospace;
  background: var(--accent-soft);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  margin-top: 2px;
  width: fit-content;
}

.session-subscription-code svg {
  opacity: 0.7;
}

.session-card-batteries {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 0;
  margin-top: 4px;
  flex-wrap: wrap;
}

.session-battery {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: var(--font-xxs);
  font-family: 'DM Mono', monospace;
  padding: 3px 8px;
  border-radius: var(--radius-sm);
  background: var(--bg-tertiary);
  color: var(--text-secondary);
}

.session-battery-old {
  background: rgba(255, 193, 7, 0.1);
  color: var(--warning);
}

.session-battery-old svg {
  color: var(--warning);
}

.session-battery-new {
  background: rgba(34, 197, 94, 0.1);
  color: var(--success);
}

.session-battery-new svg {
  color: var(--success);
}

.session-battery-arrow {
  color: var(--text-muted);
  font-size: var(--font-xxs);
}

.session-card-meta {
  display: flex;
  align-items: center;
  gap: 10px;
}

.session-amount {
  font-size: var(--font-xs);
  color: var(--success);
  font-weight: 600;
  font-family: 'DM Mono', monospace;
}

.session-card-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

.session-status-badge {
  display: inline-block;
  padding: 3px 8px;
  font-size: var(--font-2xs);
  font-weight: 600;
  border-radius: var(--radius-sm);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.session-status-badge.completed {
  background: var(--color-success-soft);
  color: var(--color-success);
}

.session-status-badge.pending {
  background: var(--color-warning-soft);
  color: var(--color-warning);
}

.session-status-badge.default {
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.session-action-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  color: var(--text-muted);
}

/* Active sessions (in-progress) - vibrant play button */
.session-action-icon.active {
  background: var(--accent-soft);
  color: var(--accent);
}

/* Completed sessions - muted/faded play button */
.session-action-icon.completed {
  background: var(--bg-tertiary);
  color: var(--text-muted);
  opacity: 0.6;
}

.session-card-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: 10px;
  border-top: 1px solid var(--border);
}

.session-time {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: var(--font-xs);
  color: var(--text-muted);
}

.session-step {
  font-size: var(--font-xs);
  color: var(--text-secondary);
  font-weight: 500;
}

/* Sessions Search */
.sessions-search {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
}

.search-input-wrapper {
  flex: 1;
  position: relative;
  display: flex;
  align-items: center;
}

.search-icon {
  position: absolute;
  left: 12px;
  color: var(--text-muted);
  pointer-events: none;
}

.search-input {
  width: 100%;
  padding: 10px 36px 10px 36px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--font-sm);
  color: var(--text-primary);
  font-family: 'Outfit', sans-serif;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.search-input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-soft);
}

.search-input::placeholder {
  color: var(--text-muted);
}

.search-clear-btn {
  position: absolute;
  right: 8px;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border: none;
  border-radius: 50%;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s ease;
}

.search-clear-btn:hover {
  background: var(--bg-elevated);
  color: var(--text-primary);
}

.search-btn {
  padding: 10px 16px;
  background: var(--accent);
  border: none;
  border-radius: var(--radius-md);
  font-size: var(--font-sm);
  font-weight: 500;
  color: var(--bg-primary);
  cursor: pointer;
  transition: all 0.2s ease;
  min-width: 80px;
}

.search-btn:hover:not(:disabled) {
  background: var(--color-brand-light);
}

.search-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Sessions Pagination */
.sessions-pagination {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 0;
  border-top: 1px solid var(--border);
  margin-top: 16px;
}

.pagination-info {
  font-size: var(--font-xs);
  color: var(--text-muted);
}

.pagination-controls {
  display: flex;
  align-items: center;
  gap: 8px;
}

.pagination-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.pagination-btn:hover:not(:disabled) {
  background: var(--bg-elevated);
  color: var(--text-primary);
  border-color: var(--border-focus);
}

.pagination-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.pagination-page {
  font-size: var(--font-sm);
  color: var(--text-secondary);
  font-weight: 500;
  min-width: 60px;
  text-align: center;
}

/* Button loading dots */
.btn-loading-dots {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

.btn-loading-dots span {
  width: 4px;
  height: 4px;
  background: currentColor;
  border-radius: 50%;
  animation: btnDotPulse 1.4s ease-in-out infinite both;
}

.btn-loading-dots span:nth-child(1) { animation-delay: -0.32s; }
.btn-loading-dots span:nth-child(2) { animation-delay: -0.16s; }
.btn-loading-dots span:nth-child(3) { animation-delay: 0s; }

@keyframes btnDotPulse {
  0%, 80%, 100% { transform: scale(0); }
  40% { transform: scale(1); }
}

/* =====================================================
   UNIFIED LIST CARD SYSTEM
   Shared card component for all mobile list rows
   ===================================================== */

.list-card {
  position: relative;
  display: flex;
  align-items: center;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  overflow: hidden;
  cursor: pointer;
  transition: all 0.15s ease;
}

[data-theme="light"] .list-card {
  box-shadow: 0 1px 3px rgba(0, 80, 80, 0.06);
}

.list-card:hover {
  background: var(--bg-tertiary);
  border-color: var(--border-focus, var(--border));
}

.list-card:active {
  transform: scale(0.985);
}

/* Card body */
.list-card-body {
  flex: 1;
  min-width: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  gap: 12px;
}

/* Left content column (text lines) */
.list-card-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.list-card-primary {
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-xl);
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.3;
}

.list-card-secondary {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-family: 'DM Mono', monospace;
  font-size: var(--font-sm);
  color: var(--accent);
  line-height: 1.3;
}

.list-card-secondary svg {
  opacity: 0.7;
  flex-shrink: 0;
}

.list-card-meta {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: var(--font-xs);
  color: var(--text-secondary);
  line-height: 1.3;
}

.list-card-meta svg {
  flex-shrink: 0;
  opacity: 0.6;
}

.list-card-dot {
  opacity: 0.35;
  font-size: 8px;
}

/* Weight/font variations within meta (no extra colors) */
.list-card-meta-bold {
  font-weight: 600;
}

.list-card-meta-mono {
  font-family: 'DM Mono', monospace;
}

/* Right column (status badge + action icon) */
.list-card-actions {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 6px;
  flex-shrink: 0;
}

.list-card-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  font-size: var(--font-xs);
  font-weight: 600;
  border-radius: var(--radius-sm);
  text-transform: uppercase;
  letter-spacing: 0.3px;
  white-space: nowrap;
}

.list-card-badge--progress {
  background: var(--color-warning-soft, rgba(245, 158, 11, 0.12));
  color: var(--color-warning, #f59e0b);
}

.list-card-badge--completed {
  background: var(--color-success-soft, rgba(0, 217, 160, 0.12));
  color: var(--color-success, var(--success));
}

.list-card-badge--default {
  background: var(--bg-elevated);
  color: var(--text-muted);
}

.list-card-action-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-sm);
  transition: all 0.15s ease;
}

.list-card-action-icon--active {
  background: var(--accent-soft);
  color: var(--accent);
}

.list-card-action-icon--muted {
  background: var(--bg-elevated);
  color: var(--text-muted);
}

/* ---- Variant: card with avatar (customers/contacts) ---- */

.list-card-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  font-family: 'Outfit', sans-serif;
  font-size: var(--font-md);
  font-weight: 600;
}

.list-card-avatar--primary {
  background: var(--accent-soft);
  color: var(--accent);
}

/* Body variant when avatar is present (adds padding for avatar) */
.list-card-body--with-avatar {
  gap: 10px;
}

/* ---- Variant: card with product image (devices) ---- */

.list-card-image {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-sm);
  object-fit: cover;
  flex-shrink: 0;
}

/* ---- Device-specific styles ---- */

.list-card-device-status {
  display: flex;
  align-items: center;
  color: var(--text-secondary);
}

.list-card-device-status--connected {
  color: var(--accent);
}

/* ---- Responsive: small screens ---- */
@media (max-width: 380px) {
  .list-card-body {
    padding: 10px 12px;
  }
  .list-card-primary {
    font-size: var(--font-lg);
  }
}